/*! bizq V1.115.17 */
!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/js/",e(e.s=28)}([function(t,e){t.exports=d3},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2);n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),window.nv=r;var i=n(11);window.d3KitTimeline=i},function(t,e,n){var r={};r.dev=!1,r.tooltip=r.tooltip||{},r.utils=r.utils||{},r.models=r.models||{},r.charts={},r.logs={},r.dom={},r.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),r.dev&&(r.dispatch.on("render_start",function(t){r.logs.startTime=+new Date}),r.dispatch.on("render_end",function(t){r.logs.endTime=+new Date,r.logs.totalTime=r.logs.endTime-r.logs.startTime,r.log("total",r.logs.totalTime)})),r.log=function(){if(r.dev&&window.console&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(r.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind){var t=Function.prototype.bind.call(console.log,console);t.apply(console,arguments)}return arguments[arguments.length-1]},r.deprecated=function(t,e){console&&console.warn&&console.warn("nvd3 warning: `"+t+"` has been deprecated. ",e||"")},r.render=function(t){t=t||1,r.render.active=!0,r.dispatch.render_start();var e=function(){for(var n,i,a=0;a<t&&(i=r.render.queue[a]);a++)n=i.generate(),typeof i.callback==typeof Function&&i.callback(n);r.render.queue.splice(0,a),r.render.queue.length?setTimeout(e):(r.dispatch.render_end(),r.render.active=!1)};setTimeout(e)},r.render.active=!1,r.render.queue=[],r.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]}),r.render.queue.push(t),r.render.active||r.render()},t.exports=r,"undefined"!=typeof window&&(window.nv=r)},function(t,e){nv.dom.write=function(t){return void 0!==window.fastdom?fastdom.write(t):t()},nv.dom.read=function(t){return void 0!==window.fastdom?fastdom.read(t):t()}},function(t,e){nv.models.tooltip=function(){"use strict";function t(){if(!d){var t=l||document.body;d=d3.select(t).append("div").attr("class","nvtooltip "+(s||"xy-tooltip")).attr("id",n),d.style("top",0).style("left",0),d.style("opacity",0),d.style("position","fixed"),d.selectAll("div, table, td, tr").classed(g,!0),d.classed(g,!0)}}function e(){if(h&&k(r))return nv.dom.write(function(){t();var e=w(r);e&&(d.node().innerHTML=e),M()}),e}var n="nvtooltip-"+Math.floor(1e5*Math.random()),r=null,i="w",a=25,o=0,s=null,l=null,u=!0,c=200,d=null,f={left:null,top:null},h=!0,p=100,v=!0,g="nv-pointer-events-none",m=function(){return{left:d3.event.clientX,top:d3.event.clientY}},y=function(t,e){return t},b=function(t){return t},x=function(t,e){return t},w=function(t){if(null===t)return"";var e=d3.select(document.createElement("table"));if(v){e.selectAll("thead").data([t]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(b(t.value))}var n=e.selectAll("tbody").data([t]).enter().append("tbody"),r=n.selectAll("tr").data(function(t){return t.series}).enter().append("tr").classed("highlight",function(t){return t.highlight});r.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(t){return t.color}),r.append("td").classed("key",!0).classed("total",function(t){return!!t.total}).html(function(t,e){return x(t.key,e)}),r.append("td").classed("value",!0).html(function(t,e){return y(t.value,e)}),r.selectAll("td").each(function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]);d3.select(this).style("border-bottom-color",e(.6)).style("border-top-color",e(.6))}});var i=e.node().outerHTML;return void 0!==t.footer&&(i+="<div class='footer'>"+t.footer+"</div>"),i},k=function(t){if(t&&t.series){if(t.series instanceof Array)return!!t.series.length;if(t.series instanceof Object)return t.series=[t.series],!0}return!1},A=function(t){var e,n,r,o=d.node().offsetHeight,s=d.node().offsetWidth,l=document.documentElement.clientWidth,u=document.documentElement.clientHeight;switch(i){case"e":e=-s-a,n=-o/2,t.left+e<0&&(e=a),(r=t.top+n)<0&&(n-=r),(r=t.top+n+o)>u&&(n-=r-u);break;case"w":e=a,n=-o/2,t.left+e+s>l&&(e=-s-a),(r=t.top+n)<0&&(n-=r),(r=t.top+n+o)>u&&(n-=r-u);break;case"n":e=-s/2-5,n=a,t.top+n+o>u&&(n=-o-a),(r=t.left+e)<0&&(e-=r),(r=t.left+e+s)>l&&(e-=r-l);break;case"s":e=-s/2,n=-o-a,t.top+n<0&&(n=a),(r=t.left+e)<0&&(e-=r),(r=t.left+e+s)>l&&(e-=r-l);break;case"center":e=-s/2,n=-o/2;break;default:e=0,n=0}return{left:e,top:n}},M=function(){nv.dom.read(function(){var t=m(),e=A(t),n=t.left+e.left,r=t.top+e.top;if(u)d.interrupt().transition().delay(c).duration(0).style("opacity",0);else{var i="translate("+f.left+"px, "+f.top+"px)",a="translate("+n+"px, "+r+"px)",o=d3.interpolateString(i,a),s=d.style("opacity")<.1;d.interrupt().transition().duration(s?0:p).styleTween("transform",function(t){return o},"important").styleTween("-webkit-transform",function(t){return o}).style("-ms-transform",a).style("opacity",1)}f.left=n,f.top=r})};return e.nvPointerEventsClass=g,e.options=nv.utils.optionsFunc.bind(e),e._options=Object.create({},{duration:{get:function(){return p},set:function(t){p=t}},gravity:{get:function(){return i},set:function(t){i=t}},distance:{get:function(){return a},set:function(t){a=t}},snapDistance:{get:function(){return o},set:function(t){o=t}},classes:{get:function(){return s},set:function(t){s=t}},chartContainer:{get:function(){return l},set:function(t){l=t}},enabled:{get:function(){return h},set:function(t){h=t}},hideDelay:{get:function(){return c},set:function(t){c=t}},contentGenerator:{get:function(){return w},set:function(t){w=t}},valueFormatter:{get:function(){return y},set:function(t){y=t}},headerFormatter:{get:function(){return b},set:function(t){b=t}},keyFormatter:{get:function(){return x},set:function(t){x=t}},headerEnabled:{get:function(){return v},set:function(t){v=t}},position:{get:function(){return m},set:function(t){m=t}},fixedTop:{get:function(){return null},set:function(t){nv.deprecated("fixedTop","feature removed after 1.8.1")}},offset:{get:function(){return{left:0,top:0}},set:function(t){nv.deprecated("offset","use chart.tooltip.distance() instead")}},hidden:{get:function(){return u},set:function(t){u!=t&&(u=!!t,e())}},data:{get:function(){return r},set:function(t){t.point&&(t.value=t.point.x,t.series=t.series||{},t.series.value=t.point.y,t.series.color=t.point.color||t.series.color),r=t}},node:{get:function(){return d.node()},set:function(t){}},id:{get:function(){return n},set:function(t){}}}),nv.utils.initOptions(e),e}},function(t,e){nv.interactiveGuideline=function(){"use strict";function t(c){c.each(function(c){function d(){var n=d3.mouse(this),r=n[0],o=n[1],s=!0,c=!1;if(u&&(r=d3.event.offsetX,o=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(s=!1),d3.event.target.className.baseVal.match("nv-legend")&&(c=!0)),s&&(r-=e.left,o-=e.top),r<0||o<0||r>h||o>p||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||c){if(u&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(l.nvPointerEventsClass)))return;return a.elementMouseout({mouseX:r,mouseY:o}),t.renderGuideLine(null),void l.hidden(!0)}l.hidden(!1);var d=i.invert(r);a.elementMousemove({mouseX:r,mouseY:o,pointXValue:d}),"dblclick"===d3.event.type&&a.elementDblclick({mouseX:r,mouseY:o,pointXValue:d}),"click"===d3.event.type&&a.elementClick({mouseX:r,mouseY:o,pointXValue:d}),"mousedown"===d3.event.type&&a.elementMouseDown({mouseX:r,mouseY:o,pointXValue:d}),"mouseup"===d3.event.type&&a.elementMouseUp({mouseX:r,mouseY:o,pointXValue:d})}var f=d3.select(this),h=n||960,p=r||400,v=f.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([c]);v.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine"),s&&(s.on("touchmove",d).on("mousemove",d,!0).on("mouseout",d,!0).on("mousedown",d,!0).on("mouseup",d,!0).on("dblclick",d).on("click",d),t.guideLine=null,t.renderGuideLine=function(e){o&&(t.guideLine&&t.guideLine.attr("x1")===e||nv.dom.write(function(){var t=v.select(".nv-interactiveGuideLine").selectAll("line").data(null!=e?[nv.utils.NaNtoZero(e)]:[],String);t.enter().append("line").attr("class","nv-guideline").attr("x1",function(t){return t}).attr("x2",function(t){return t}).attr("y1",p).attr("y2",0),t.exit().remove()}))})})}var e={left:0,top:0},n=null,r=null,i=d3.scale.linear(),a=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),o=!0,s=null,l=nv.models.tooltip(),u="ActiveXObject"in window;return l.duration(0).hideDelay(0).hidden(!1),t.dispatch=a,t.tooltip=l,t.margin=function(n){return arguments.length?(e.top=void 0!==n.top?n.top:e.top,e.left=void 0!==n.left?n.left:e.left,t):e},t.width=function(e){return arguments.length?(n=e,t):n},t.height=function(e){return arguments.length?(r=e,t):r},t.xScale=function(e){return arguments.length?(i=e,t):i},t.showGuideLine=function(e){return arguments.length?(o=e,t):o},t.svgContainer=function(e){return arguments.length?(s=e,t):s},t},nv.interactiveBisect=function(t,e,n){"use strict";if(!(t instanceof Array))return null;var r;r="function"!=typeof n?function(t){return t.x}:n;var i=function(t,e){return r(t)-e},a=d3.bisector(i).left,o=d3.max([0,a(t,e)-1]),s=r(t[o]);if(void 0===s&&(s=o),s===e)return o;var l=d3.min([o+1,t.length-1]),u=r(t[l]);return void 0===u&&(u=l),Math.abs(u-e)>=Math.abs(s-e)?o:l},nv.nearestValueIndex=function(t,e,n){"use strict";var r=1/0,i=null;return t.forEach(function(t,a){var o=Math.abs(e-t);null!=t&&o<=r&&o<n&&(r=o,i=a)}),i}},function(t,e){nv.utils.windowSize=function(){var t={width:640,height:480};return window.innerWidth&&window.innerHeight?(t.width=window.innerWidth,t.height=window.innerHeight,t):"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight,t):document.body&&document.body.offsetWidth?(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight,t):t},nv.utils.windowResize=function(t){return window.addEventListener?window.addEventListener("resize",t):nv.log("ERROR: Failed to bind to window.resize with: ",t),{callback:t,clear:function(){window.removeEventListener("resize",t)}}},nv.utils.getColor=function(t){if(void 0===t)return nv.utils.defaultColor();if(Array.isArray(t)){var e=d3.scale.ordinal().range(t);return function(t,n){var r=void 0===n?t:n;return t.color||e(r)}}return t},nv.utils.defaultColor=function(){return nv.utils.getColor(d3.scale.category20().range())},nv.utils.customTheme=function(t,e,n){e=e||function(t){return t.key},n=n||d3.scale.category20().range();var r=n.length;return function(i,a){var o=e(i);return"function"==typeof t[o]?t[o]():void 0!==t[o]?t[o]:(r||(r=n.length),r-=1,n[r])}},nv.utils.pjax=function(t,e){var n=function(n){d3.html(n,function(n){var r=d3.select(e).node();r.parentNode.replaceChild(d3.select(n).select(e).node(),r),nv.utils.pjax(t,e)})};d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href),n(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&n(d3.event.state)})},nv.utils.calcApproxTextWidth=function(t){if("function"==typeof t.style&&"function"==typeof t.text){var e=parseInt(t.style("font-size").replace("px",""),10);return t.text().length*e*.5}return 0},nv.utils.NaNtoZero=function(t){return"number"!=typeof t||isNaN(t)||null===t||t===1/0||t===-1/0?0:t},d3.selection.prototype.watchTransition=function(t){var e=[this].concat([].slice.call(arguments,1));return t.transition.apply(t,e)},nv.utils.renderWatch=function(t,e){if(!(this instanceof nv.utils.renderWatch))return new nv.utils.renderWatch(t,e);var n=void 0!==e?e:250,r=[],i=this;this.models=function(t){return t=[].slice.call(arguments,0),t.forEach(function(t){t.__rendered=!1,function(t){t.dispatch.on("renderEnd",function(e){t.__rendered=!0,i.renderEnd("model")})}(t),r.indexOf(t)<0&&r.push(t)}),this},this.reset=function(t){void 0!==t&&(n=t),r=[]},this.transition=function(t,e,a){if(e=arguments.length>1?[].slice.call(arguments,1):[],a=e.length>1?e.pop():void 0!==n?n:250,t.__rendered=!1,r.indexOf(t)<0&&r.push(t),0===a)return t.__rendered=!0,t.delay=function(){return this},t.duration=function(){return this},t;0===t.length?t.__rendered=!0:t.every(function(t){return!t.length})?t.__rendered=!0:t.__rendered=!1;var o=0;return t.transition().duration(a).each(function(){++o}).each("end",function(n,r){0==--o&&(t.__rendered=!0,i.renderEnd.apply(this,e))})},this.renderEnd=function(){r.every(function(t){return t.__rendered})&&(r.forEach(function(t){t.__rendered=!1}),t.renderEnd.apply(this,arguments))}},nv.utils.deepExtend=function(t){(arguments.length>1?[].slice.call(arguments,1):[]).forEach(function(e){for(var n in e){var r=t[n]instanceof Array,i="object"==typeof t[n],a="object"==typeof e[n];i&&!r&&a?nv.utils.deepExtend(t[n],e[n]):t[n]=e[n]}})},nv.utils.state=function(){if(!(this instanceof nv.utils.state))return new nv.utils.state;var t={},e=function(){},n=function(){return{}},r=null,i=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",function(t){e(t,!0)}),this.getter=function(t){return n=t,this},this.setter=function(t,n){return n||(n=function(){}),e=function(e,r){t(e),r&&n()},this},this.init=function(t){r=r||{},nv.utils.deepExtend(r,t)};var a=function(){var e=n();if(JSON.stringify(e)===JSON.stringify(t))return!1;for(var r in e)void 0===t[r]&&(t[r]={}),t[r]=e[r],i=!0;return!0};this.update=function(){r&&(e(r,!1),r=null),a.call(this)&&this.dispatch.change(t)}},nv.utils.optionsFunc=function(t){return t&&d3.map(t).forEach(function(t,e){"function"==typeof this[t]&&this[t](e)}.bind(this)),this},nv.utils.calcTicksX=function(t,e){var n=1,r=0;for(r;r<e.length;r+=1){var i=e[r]&&e[r].values?e[r].values.length:0;n=i>n?i:n}return nv.log("Requested number of ticks: ",t),nv.log("Calculated max values to be: ",n),t=t>n?t=n-1:t,t=t<1?1:t,t=Math.floor(t),nv.log("Calculating tick count as: ",t),t},nv.utils.calcTicksY=function(t,e){return nv.utils.calcTicksX(t,e)},nv.utils.initOption=function(t,e){t._calls&&t._calls[e]?t[e]=t._calls[e]:(t[e]=function(n){return arguments.length?(t._overrides[e]=!0,t._options[e]=n,t):t._options[e]},t["_"+e]=function(n){return arguments.length?(t._overrides[e]||(t._options[e]=n),t):t._options[e]})},nv.utils.initOptions=function(t){t._overrides=t._overrides||{};var e=Object.getOwnPropertyNames(t._options||{}),n=Object.getOwnPropertyNames(t._calls||{});e=e.concat(n);for(var r in e)nv.utils.initOption(t,e[r])},nv.utils.inheritOptionsD3=function(t,e,n){t._d3options=n.concat(t._d3options||[]),n.unshift(e),n.unshift(t),d3.rebind.apply(this,n)},nv.utils.arrayUnique=function(t){return t.sort().filter(function(e,n){return!n||e!=t[n-1]})},nv.utils.symbolMap=d3.map(),nv.utils.symbol=function(){function t(t,r){var i=e.call(this,t,r),a=n.call(this,t,r);return-1!==d3.svg.symbolTypes.indexOf(i)?d3.svg.symbol().type(i).size(a)():nv.utils.symbolMap.get(i)(a)}var e,n=64;return t.type=function(n){return arguments.length?(e=d3.functor(n),t):e},t.size=function(e){return arguments.length?(n=d3.functor(e),t):n},t},nv.utils.inheritOptions=function(t,e){var n=Object.getOwnPropertyNames(e._options||{}),r=Object.getOwnPropertyNames(e._calls||{}),i=e._inherited||[],a=e._d3options||[],o=n.concat(r).concat(i).concat(a);o.unshift(e),o.unshift(t),d3.rebind.apply(this,o),t._inherited=nv.utils.arrayUnique(n.concat(r).concat(i).concat(n).concat(t._inherited||[])),t._d3options=nv.utils.arrayUnique(a.concat(t._d3options||[]))},nv.utils.initSVG=function(t){t.classed({"nvd3-svg":!0})},nv.utils.sanitizeHeight=function(t,e){return t||parseInt(e.style("height"),10)||400},nv.utils.sanitizeWidth=function(t,e){return t||parseInt(e.style("width"),10)||960},nv.utils.availableHeight=function(t,e,n){return nv.utils.sanitizeHeight(t,e)-n.top-n.bottom},nv.utils.availableWidth=function(t,e,n){return nv.utils.sanitizeWidth(t,e)-n.left-n.right},nv.utils.noData=function(t,e){var n=t.options(),r=n.margin(),i=n.noData(),a=null==i?["No Data Available."]:[i],o=nv.utils.availableHeight(null,e,r),s=nv.utils.availableWidth(null,e,r),l=r.left+s/2,u=r.top+o/2;e.selectAll("g").remove();var c=e.selectAll(".nv-noData").data(a);c.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),c.attr("x",l).attr("y",u).text(function(t){return t})},nv.utils.wrapTicks=function(t,e){t.each(function(){for(var t,n=d3.select(this),r=n.text().split(/\s+/).reverse(),i=[],a=0,o=n.attr("y"),s=parseFloat(n.attr("dy")),l=n.text(null).append("tspan").attr("x",0).attr("y",o).attr("dy",s+"em");t=r.pop();)i.push(t),l.text(i.join(" ")),l.node().getComputedTextLength()>e&&(i.pop(),l.text(i.join(" ")),i=[t],l=n.append("tspan").attr("x",0).attr("y",o).attr("dy",1.1*++a+s+"em").text(t))})},nv.utils.arrayEquals=function(t,e){if(t===e)return!0;if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!nv.arrayEquals(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}},function(t,e){nv.models.legend=function(){"use strict";function t(v){function g(t,e){return"furious"!=p?"#000":f?t.disengaged?"#000":"#fff":f?void 0:(t.color||(t.color=a(t,e)),t.disabled?t.color:"#fff")}function m(t,e){return f&&"furious"==p&&t.disengaged?"#eee":t.color||a(t,e)}function y(t,e){return f&&"furious"==p?1:t.disabled?0:1}return v.each(function(t){var a=n-e.left-e.right,v=d3.select(this);nv.utils.initSVG(v);var b=v.selectAll("g.nv-legend").data([t]),x=b.enter().append("g").attr("class","nvd3 nv-legend").append("g"),w=b.select("g");b.attr("transform","translate("+e.left+","+e.top+")");var k,A,M=w.selectAll(".nv-series").data(function(t){return"furious"!=p?t:t.filter(function(t){return!!f||!t.disengaged})}),E=M.enter().append("g").attr("class","nv-series");switch(p){case"furious":A=23;break;case"classic":A=20}if("classic"==p)E.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),k=M.select("circle");else if("furious"==p){E.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),k=M.select(".nv-legend-symbol"),E.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)");var P=M.select(".nv-check-box");P.each(function(t,e){d3.select(this).selectAll("path").attr("stroke",g(t,e))})}E.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var D=M.select("text.nv-legend-text");M.on("mouseover",function(t,e){h.legendMouseover(t,e)}).on("mouseout",function(t,e){h.legendMouseout(t,e)}).on("click",function(t,e){h.legendClick(t,e);var n=M.data();if(c){if("classic"==p)d?(n.forEach(function(t){t.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,n.every(function(t){return t.disabled})&&n.forEach(function(t){t.disabled=!1}));else if("furious"==p)if(f)t.disengaged=!t.disengaged,t.userDisabled=void 0==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled;else if(!f){t.disabled=!t.disabled,t.userDisabled=t.disabled;var r=n.filter(function(t){return!t.disengaged});r.every(function(t){return t.userDisabled})&&n.forEach(function(t){t.disabled=t.userDisabled=!1})}h.stateChange({disabled:n.map(function(t){return!!t.disabled}),disengaged:n.map(function(t){return!!t.disengaged})})}}).on("dblclick",function(t,e){if(("furious"!=p||!f)&&(h.legendDblclick(t,e),c)){var n=M.data();n.forEach(function(t){t.disabled=!0,"furious"==p&&(t.userDisabled=t.disabled)}),t.disabled=!1,"furious"==p&&(t.userDisabled=t.disabled),h.stateChange({disabled:n.map(function(t){return!!t.disabled})})}}),M.classed("nv-disabled",function(t){return t.userDisabled}),M.exit().remove(),D.attr("fill",g).text(i);var T=0;if(s){var C=[];M.each(function(t,e){var n;if(i(t).length>o){var r=i(t).substring(0,o);n=d3.select(this).select("text").text(r+"..."),d3.select(this).append("svg:title").text(i(t))}else n=d3.select(this).select("text");var a;try{if((a=n.node().getComputedTextLength())<=0)throw Error()}catch(t){a=nv.utils.calcApproxTextWidth(n)}C.push(a+l)});var S=0,O=[];for(T=0;T<a&&S<C.length;)O[S]=C[S],T+=C[S++];for(0===S&&(S=1);T>a&&S>1;){O=[],S--;for(var N=0;N<C.length;N++)C[N]>(O[N%S]||0)&&(O[N%S]=C[N]);T=O.reduce(function(t,e,n,r){return t+e})}for(var L=[],_=0,B=0;_<S;_++)L[_]=B,B+=O[_];M.attr("transform",function(t,e){return"translate("+L[e%S]+","+(5+Math.floor(e/S)*A)+")"}),u?w.attr("transform","translate("+(n-e.right-T)+","+e.top+")"):w.attr("transform","translate(0,"+e.top+")"),r=e.top+e.bottom+Math.ceil(C.length/S)*A}else{var F,j=5,I=5,V=0;M.attr("transform",function(t,r){var i=d3.select(this).select("text").node().getComputedTextLength()+l;return F=I,n<e.left+e.right+F+i&&(I=F=5,j+=A),I+=i,I>V&&(V=I),T<F+V&&(T=F+V),"translate("+F+","+j+")"}),w.attr("transform","translate("+(n-e.right-V)+","+e.top+")"),r=e.top+e.bottom+j+15}if("furious"==p){k.attr("width",function(t,e){return D[0][e].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),x.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0);w.select(".nv-legend-bg").transition().duration(300).attr("x",-A).attr("width",T+A-12).attr("height",r+10).attr("y",-e.top-10).attr("opacity",f?1:0)}k.style("fill",m).style("fill-opacity",y).style("stroke",m)}),t}var e={top:5,right:0,bottom:5,left:0},n=400,r=20,i=function(t){return t.key},a=nv.utils.getColor(),o=20,s=!0,l=32,u=!0,c=!0,d=!1,f=!1,h=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),p="classic";return t.dispatch=h,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return r},set:function(t){r=t}},key:{get:function(){return i},set:function(t){i=t}},align:{get:function(){return s},set:function(t){s=t}},maxKeyLength:{get:function(){return o},set:function(t){o=t}},rightAlign:{get:function(){return u},set:function(t){u=t}},padding:{get:function(){return l},set:function(t){l=t}},updateState:{get:function(){return c},set:function(t){c=t}},radioButtonMode:{get:function(){return d},set:function(t){d=t}},expanded:{get:function(){return f},set:function(t){f=t}},vers:{get:function(){return p},set:function(t){p=t}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},color:{get:function(){return a},set:function(t){a=nv.utils.getColor(t)}}}),nv.utils.initOptions(t),t}},function(t,e){nv.models.axis=function(){"use strict";function t(a){return m.reset(),a.each(function(t){var a=d3.select(this);nv.utils.initSVG(a);var p=a.selectAll("g.nv-wrap.nv-axis").data([t]),v=p.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),y=(v.append("g"),p.select("g"));null!==f?e.ticks(f):"top"!=e.orient()&&"bottom"!=e.orient()||e.ticks(Math.abs(n.range()[1]-n.range()[0])/100),y.watchTransition(m,"axis").call(e),g=g||e.scale();var b=e.tickFormat();null==b&&(b=g.tickFormat());var x=y.selectAll("text.nv-axislabel").data([o||null]);x.exit().remove();var w,k,A;switch(e.orient()){case"top":x.enter().append("text").attr("class","nv-axislabel"),A=0,1===n.range().length?A=d?2*n.range()[0]+n.rangeBand():0:2===n.range().length?A=d?n.range()[0]+n.range()[1]+n.rangeBand():n.range()[1]:n.range().length>2&&(A=n.range()[n.range().length-1]+(n.range()[1]-n.range()[0])),x.attr("text-anchor","middle").attr("y",0).attr("x",A/2),s&&(k=p.selectAll("g.nv-axisMaxMin").data(n.domain()),k.enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),k.exit().remove(),k.attr("transform",function(t,e){return"translate("+nv.utils.NaNtoZero(n(t))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-e.tickPadding()).attr("text-anchor","middle").text(function(t,e){var n=b(t);return(""+n).match("NaN")?"":n}),k.watchTransition(m,"min-max top").attr("transform",function(t,e){return"translate("+nv.utils.NaNtoZero(n.range()[e])+",0)"}));break;case"bottom":w=h+36;var M=30,E=0,P=y.selectAll("g").select("text"),D="";if(l%360){P.each(function(t,e){var n=this.getBoundingClientRect(),r=n.width;E=n.height,r>M&&(M=r)}),D="rotate("+l+" 0,"+(E/2+e.tickPadding())+")";var T=Math.abs(Math.sin(l*Math.PI/180));w=(T?T*M:M)+30,P.attr("transform",D).style("text-anchor",l%360>0?"start":"end")}x.enter().append("text").attr("class","nv-axislabel"),A=0,1===n.range().length?A=d?2*n.range()[0]+n.rangeBand():0:2===n.range().length?A=d?n.range()[0]+n.range()[1]+n.rangeBand():n.range()[1]:n.range().length>2&&(A=n.range()[n.range().length-1]+(n.range()[1]-n.range()[0])),x.attr("text-anchor","middle").attr("y",w).attr("x",A/2),s&&(k=p.selectAll("g.nv-axisMaxMin").data([n.domain()[0],n.domain()[n.domain().length-1]]),k.enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),k.exit().remove(),k.attr("transform",function(t,e){return"translate("+nv.utils.NaNtoZero(n(t)+(d?n.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",e.tickPadding()).attr("transform",D).style("text-anchor",l?l%360>0?"start":"end":"middle").text(function(t,e){var n=b(t);return(""+n).match("NaN")?"":n}),k.watchTransition(m,"min-max bottom").attr("transform",function(t,e){return"translate("+nv.utils.NaNtoZero(n(t)+(d?n.rangeBand()/2:0))+",0)"})),c&&P.attr("transform",function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"});break;case"right":x.enter().append("text").attr("class","nv-axislabel"),x.style("text-anchor",u?"middle":"begin").attr("transform",u?"rotate(90)":"").attr("y",u?12-Math.max(r.right,i):-10).attr("x",u?d3.max(n.range())/2:e.tickPadding()),s&&(k=p.selectAll("g.nv-axisMaxMin").data(n.domain()),k.enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),k.exit().remove(),k.attr("transform",function(t,e){return"translate(0,"+nv.utils.NaNtoZero(n(t))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",e.tickPadding()).style("text-anchor","start").text(function(t,e){var n=b(t);return(""+n).match("NaN")?"":n}),k.watchTransition(m,"min-max right").attr("transform",function(t,e){return"translate(0,"+nv.utils.NaNtoZero(n.range()[e])+")"}).select("text").style("opacity",1));break;case"left":x.enter().append("text").attr("class","nv-axislabel"),x.style("text-anchor",u?"middle":"end").attr("transform",u?"rotate(-90)":"").attr("y",u?25-Math.max(r.left,i)-(h||0):-10).attr("x",u?-d3.max(n.range())/2:-e.tickPadding()),s&&(k=p.selectAll("g.nv-axisMaxMin").data(n.domain()),k.enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),k.exit().remove(),k.attr("transform",function(t,e){return"translate(0,"+nv.utils.NaNtoZero(g(t))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-e.tickPadding()).attr("text-anchor","end").text(function(t,e){var n=b(t);return(""+n).match("NaN")?"":n}),k.watchTransition(m,"min-max right").attr("transform",function(t,e){return"translate(0,"+nv.utils.NaNtoZero(n.range()[e])+")"}).select("text").style("opacity",1))}if(x.text(function(t){return t}),!s||"left"!==e.orient()&&"right"!==e.orient()||(y.selectAll("g").each(function(t,e){d3.select(this).select("text").attr("opacity",1),(n(t)<n.range()[1]+10||n(t)>n.range()[0]-10)&&((t>1e-10||t<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),n.domain()[0]==n.domain()[1]&&0==n.domain()[0]&&p.selectAll("g.nv-axisMaxMin").style("opacity",function(t,e){return e?0:1})),s&&("top"===e.orient()||"bottom"===e.orient())){var C=[];p.selectAll("g.nv-axisMaxMin").each(function(t,e){try{e?C.push(n(t)-this.getBoundingClientRect().width-4):C.push(n(t)+this.getBoundingClientRect().width+4)}catch(r){e?C.push(n(t)-4):C.push(n(t)+4)}}),y.selectAll("g").each(function(t,e){(n(t)<C[0]||n(t)>C[1])&&(t>1e-10||t<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())})}y.selectAll(".tick").filter(function(t){return!parseFloat(Math.round(1e5*t)/1e6)&&void 0!==t}).classed("zero",!0),g=n.copy()}),m.renderEnd("axis immediate"),t}var e=d3.svg.axis(),n=d3.scale.linear(),r={top:0,right:0,bottom:0,left:0},i=75,a=60,o=null,s=!0,l=0,u=!0,c=!1,d=!1,f=null,h=0,p=250,v=d3.dispatch("renderEnd");e.scale(n).orient("bottom").tickFormat(function(t){return t});var g,m=nv.utils.renderWatch(v,p);return t.axis=e,t.dispatch=v,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{axisLabelDistance:{get:function(){return h},set:function(t){h=t}},staggerLabels:{get:function(){return c},set:function(t){c=t}},rotateLabels:{get:function(){return l},set:function(t){l=t}},rotateYLabel:{get:function(){return u},set:function(t){u=t}},showMaxMin:{get:function(){return s},set:function(t){s=t}},axisLabel:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},ticks:{get:function(){return f},set:function(t){f=t}},width:{get:function(){return i},set:function(t){i=t}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}},duration:{get:function(){return p},set:function(t){p=t,m.reset(p)}},scale:{get:function(){return n},set:function(r){n=r,e.scale(n),d="function"==typeof n.rangeBands,nv.utils.inheritOptionsD3(t,n,["domain","range","rangeBand","rangeBands"])}}}),nv.utils.initOptions(t),nv.utils.inheritOptionsD3(t,e,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),nv.utils.inheritOptionsD3(t,n,["domain","range","rangeBand","rangeBands"]),t}},function(t,e){nv.models.discreteBar=function(){"use strict";function t(d){return A.reset(),d.each(function(t){var d=u-l.left-l.right,k=c-l.top-l.bottom;e=d3.select(this),nv.utils.initSVG(e),t.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var M=n&&r?[]:t.map(function(t){return t.values.map(function(t,e){return{x:p(t,e),y:v(t,e),y0:t.y0}})});f.domain(n||d3.merge(M).map(function(t){return t.x})).rangeBands(i||[0,d],.1),h.domain(r||d3.extent(d3.merge(M).map(function(t){return t.y}).concat(g))),y?h.range(a||[k-(h.domain()[0]<0?12:0),h.domain()[1]>0?12:0]):h.range(a||[k,0]),o=o||f,s=s||h.copy().range([h(0),h(0)]);var E=e.selectAll("g.nv-wrap.nv-discretebar").data([t]),P=E.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),D=P.append("g");E.select("g");D.append("g").attr("class","nv-groups"),E.attr("transform","translate("+l.left+","+l.top+")");var T=E.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});T.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),T.exit().watchTransition(A,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),T.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),T.watchTransition(A,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var C=T.selectAll("g.nv-bar").data(function(t){return t.values});C.exit().remove();var S=C.enter().append("g").attr("transform",function(t,e,n){return"translate("+(f(p(t,e))+.05*f.rangeBand())+", "+h(0)+")"}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),x.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),x.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){x.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){var n=this;x.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:n}),d3.event.stopPropagation()}).on("dblclick",function(t,e){x.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()});S.append("rect").attr("height",0).attr("width",.9*f.rangeBand()/t.length),y?(S.append("text").attr("text-anchor","middle"),C.select("text").text(function(t,e){return b(v(t,e))}).watchTransition(A,"discreteBar: bars text").attr("x",.9*f.rangeBand()/2).attr("y",function(t,e){return v(t,e)<0?h(v(t,e))-h(0)+12:-4})):C.selectAll("text").remove(),C.attr("class",function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(t,e){return t.color||m(t,e)}).style("stroke",function(t,e){return t.color||m(t,e)}).select("rect").attr("class",w).watchTransition(A,"discreteBar: bars rect").attr("width",.9*f.rangeBand()/t.length),C.watchTransition(A,"discreteBar: bars").attr("transform",function(t,e){return"translate("+(f(p(t,e))+.05*f.rangeBand())+", "+(v(t,e)<0?h(0):h(0)-h(v(t,e))<1?h(0)-1:h(v(t,e)))+")"}).select("rect").attr("height",function(t,e){return Math.max(Math.abs(h(v(t,e))-h(0)),1)}),o=f.copy(),s=h.copy()}),A.renderEnd("discreteBar immediate"),t}var e,n,r,i,a,o,s,l={top:0,right:0,bottom:0,left:0},u=960,c=500,d=Math.floor(1e4*Math.random()),f=d3.scale.ordinal(),h=d3.scale.linear(),p=function(t){return t.x},v=function(t){return t.y},g=[0],m=nv.utils.defaultColor(),y=!1,b=d3.format(",.2f"),x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),w="discreteBar",k=250,A=nv.utils.renderWatch(x,k);return t.dispatch=x,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},forceY:{get:function(){return g},set:function(t){g=t}},showValues:{get:function(){return y},set:function(t){y=t}},x:{get:function(){return p},set:function(t){p=t}},y:{get:function(){return v},set:function(t){v=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return h},set:function(t){h=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return a},set:function(t){a=t}},valueFormat:{get:function(){return b},set:function(t){b=t}},id:{get:function(){return d},set:function(t){d=t}},rectClass:{get:function(){return w},set:function(t){w=t}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},color:{get:function(){return m},set:function(t){m=nv.utils.getColor(t)}},duration:{get:function(){return k},set:function(t){k=t,A.reset(k)}}}),nv.utils.initOptions(t),t}},function(t,e){nv.models.discreteBarChart=function(){"use strict";function t(s){return k.reset(),k.models(r),h&&k.models(i),p&&k.models(a),s.each(function(s){var d=d3.select(this);nv.utils.initSVG(d);var b=nv.utils.availableWidth(u,d,l),k=nv.utils.availableHeight(c,d,l);if(t.update=function(){x.beforeUpdate(),d.transition().duration(w).call(t)},t.container=this,!(s&&s.length&&s.filter(function(t){return t.values.length}).length))return nv.utils.noData(t,d),t;d.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale().clamp(!0);var A=d.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([s]),M=A.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),E=M.append("defs"),P=A.select("g");if(M.append("g").attr("class","nv-x nv-axis"),M.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),M.append("g").attr("class","nv-barsWrap"),M.append("g").attr("class","nv-legendWrap"),P.attr("transform","translate("+l.left+","+l.top+")"),f&&(o.width(b),P.select(".nv-legendWrap").datum(s).call(o),l.top!=o.height()&&(l.top=o.height(),k=nv.utils.availableHeight(c,d,l)),A.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")),v&&P.select(".nv-y.nv-axis").attr("transform","translate("+b+",0)"),v&&P.select(".nv-y.nv-axis").attr("transform","translate("+b+",0)"),r.width(b).height(k),P.select(".nv-barsWrap").datum(s.filter(function(t){return!t.disabled})).transition().call(r),E.append("clipPath").attr("id","nv-x-label-clip-"+r.id()).append("rect"),P.select("#nv-x-label-clip-"+r.id()+" rect").attr("width",e.rangeBand()*(g?2:1)).attr("height",16).attr("x",-e.rangeBand()/(g?1:2)),h){i.scale(e)._ticks(nv.utils.calcTicksX(b/100,s)).tickSize(-k,0),P.select(".nv-x.nv-axis").attr("transform","translate(0,"+(n.range()[0]+(r.showValues()&&n.domain()[0]<0?16:0))+")"),P.select(".nv-x.nv-axis").call(i);var D=P.select(".nv-x.nv-axis").selectAll("g");g&&D.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"}),y&&D.selectAll(".tick text").attr("transform","rotate("+y+" 0,0)").style("text-anchor",y>0?"start":"end"),m&&P.selectAll(".tick text").call(nv.utils.wrapTicks,t.xAxis.rangeBand())}p&&(a.scale(n)._ticks(nv.utils.calcTicksY(k/36,s)).tickSize(-b,0),P.select(".nv-y.nv-axis").call(a)),P.select(".nv-zeroLine line").attr("x1",0).attr("x2",v?-b:b).attr("y1",n(0)).attr("y2",n(0))}),k.renderEnd("discreteBar chart immediate"),t}var e,n,r=nv.models.discreteBar(),i=nv.models.axis(),a=nv.models.axis(),o=nv.models.legend(),s=nv.models.tooltip(),l={top:15,right:10,bottom:50,left:60},u=null,c=null,d=nv.utils.getColor(),f=!1,h=!0,p=!0,v=!1,g=!1,m=!1,y=0,b=null,x=d3.dispatch("beforeUpdate","renderEnd"),w=250;i.orient("bottom").showMaxMin(!1).tickFormat(function(t){return t}),a.orient(v?"right":"left").tickFormat(d3.format(",.1f")),s.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return a.tickFormat()(t,e)}).keyFormatter(function(t,e){return i.tickFormat()(t,e)});var k=nv.utils.renderWatch(x,w);return r.dispatch.on("elementMouseover.tooltip",function(e){e.series={key:t.x()(e.data),value:t.y()(e.data),color:e.color},s.data(e).hidden(!1)}),r.dispatch.on("elementMouseout.tooltip",function(t){s.hidden(!0)}),r.dispatch.on("elementMousemove.tooltip",function(t){s()}),t.dispatch=x,t.discretebar=r,t.legend=o,t.xAxis=i,t.yAxis=a,t.tooltip=s,t.options=nv.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},showLegend:{get:function(){return f},set:function(t){f=t}},staggerLabels:{get:function(){return g},set:function(t){g=t}},rotateLabels:{get:function(){return y},set:function(t){y=t}},wrapLabels:{get:function(){return m},set:function(t){m=!!t}},showXAxis:{get:function(){return h},set:function(t){h=t}},showYAxis:{get:function(){return p},set:function(t){p=t}},noData:{get:function(){return b},set:function(t){b=t}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return w},set:function(t){w=t,k.reset(w),r.duration(w),i.duration(w),a.duration(w)}},color:{get:function(){return d},set:function(t){d=nv.utils.getColor(t),r.color(d),o.color(d)}},rightAlignYAxis:{get:function(){return v},set:function(t){v=t,a.orient(t?"right":"left")}}}),nv.utils.inheritOptions(t,r),nv.utils.initOptions(t),t}},function(t,e,n){"use strict";var r,i,a;!function(o,s){i=[n(0),n(12),n(13)],r=s,void 0!==(a="function"==typeof r?r.apply(e,i):r)&&(t.exports=a)}(0,function(t,e,n){var r={margin:{left:40,right:20,top:20,bottom:20},initialWidth:400,initialHeight:400,scale:t.time.scale(),domain:void 0,direction:"right",dotRadius:3,layerGap:60,labella:{},keyFn:void 0,timeFn:function(t){return t.time},textFn:function(t){return t.text},dotColor:"#222",labelBgColor:"#222",labelTextColor:"#fff",linkColor:"#222",labelPadding:{left:4,right:4,top:3,bottom:2},textYOffset:"0.85em"},i=["dotClick","dotMouseover","dotMousemove","dotMouseout","labelClick","labelMouseover","labelMousemove","labelMouseout"];return e.factory.createChart(r,i,function(e){function r(t){return t.w}function i(t){return t.h}function a(t){return c.scale(c.timeFn(t))}function o(){if(e.hasData()){var r=e.data();c.domain?c.scale.domain(c.domain):c.scale.domain(t.extent(r,c.timeFn)).nice(),c.scale.range([0,"left"===c.direction||"right"===c.direction?e.getInnerHeight():e.getInnerWidth()]),p.scale(c.scale);var i;switch(c.direction){case"right":p.orient("left"),i="translate(0,0)";break;case"left":p.orient("right"),i="translate("+e.getInnerWidth()+",0)";break;case"up":p.orient("bottom"),i="translate(0,"+e.getInnerHeight()+")";break;case"down":p.orient("top"),i="translate(0,0)"}f.get("main").attr("transform",i),f.get("main.axis").call(p),s(r);var o=f.get("dummy").append("text").classed("label-text",!0),u=r.map(function(t){var e=o.text(c.textFn(t))[0][0].getBBox(),r=e.width+c.labelPadding.left+c.labelPadding.right,i=e.height+c.labelPadding.top+c.labelPadding.bottom,s=new n.Node(a(t),"left"===c.direction||"right"===c.direction?i:r,t);return s.w=r,s.h=i,s});return o.remove(),h.options(c.labella).nodes(u).compute(),l(h.nodes()),e}}function s(t){var e=f.get("main.dot").selectAll("circle.dot").data(t,c.keyFn),n="left"===c.direction||"right"===c.direction?"cy":"cx";e.enter().append("circle").classed("dot",!0).on("click",function(t,e){d.dotClick(t,e)}).on("mouseover",function(t,e){d.dotMouseover(t,e)}).on("mousemove",function(t,e){d.dotMousemove(t,e)}).on("mouseout",function(t,e){d.dotMouseout(t,e)}).style("fill",c.dotColor).attr("r",c.dotRadius).attr(n,a),e.transition().style("fill",c.dotColor).attr("r",c.dotRadius).attr(n,a),e.exit().remove()}function l(e){function a(t){switch(c.direction){case"right":return"translate("+t.x+","+(t.y-t.dy/2)+")";case"left":return"translate("+(t.x+o-t.w)+","+(t.y-t.dy/2)+")";case"up":case"down":return"translate("+(t.x-t.dx/2)+","+t.y+")"}}var o;o="left"===c.direction||"right"===c.direction?t.max(e,r):t.max(e,i);var s=new n.Renderer({nodeHeight:o,layerGap:c.layerGap,direction:c.direction});s.layout(e);var l=t.functor(c.labelBgColor),u=t.functor(c.labelTextColor),h=t.functor(c.linkColor),p=f.get("main.label").selectAll("g.label-g").data(e,c.keyFn?function(t){return c.keyFn(t.data)}:void 0),v=p.enter().append("g").classed("label-g",!0).on("click",function(t,e){d.labelClick(t.data,e)}).on("mouseover",function(t,e){d.labelMouseover(t.data,e)}).on("mousemove",function(t,e){d.labelMousemove(t.data,e)}).on("mouseout",function(t,e){d.labelMouseout(t.data,e)}).attr("transform",a);v=v.append("svg:a").attr("class",function(t){return t.data.class}).attr("xlink:href",function(t){return t.data.href}).attr("xlink:title",function(t){return t.data.desc}),v.append("title").text(function(t){return t.data.desc}),v.append("rect").classed("label-bg",!0).attr("rx",2).attr("ry",2).attr("width",r).attr("height",18).style("fill",function(t){return l(t.data)}),v.append("text").classed("label-text",!0).attr("dy",c.textYOffset).attr("x",c.labelPadding.left).attr("y",c.labelPadding.top).style("fill",function(t){return u(t.data)}).text(function(t){return c.textFn(t.data)});var g=p.transition().attr("transform",a);g.select("rect").attr("width",r).attr("height",i).style("fill",function(t){return l(t.data)}),g.select("text.label-text").attr("dy",c.textYOffset).attr("x",c.labelPadding.left).attr("y",c.labelPadding.top).style("fill",function(t){return u(t.data)}).text(function(t){return c.textFn(t.data)}),p.exit().remove();var m=f.get("main.link").selectAll("path.link").data(e,c.keyFn?function(t){return c.keyFn(t.data)}:void 0);m.enter().append("path").classed("link",!0).attr("d",function(t){return s.generatePath(t)}).style("stroke",function(t){return h(t.data)}).style("fill","none"),m.transition().style("stroke",function(t){return h(t.data)}).attr("d",function(t){return s.generatePath(t)}),m.exit().remove()}function u(){var n;switch(c.direction){case"up":n=t.max(h.nodes(),function(t){return Math.abs(t.y)})||0,e.height(n+c.margin.top+c.margin.bottom);break;case"down":n=t.max(h.nodes(),function(t){return Math.abs(t.y+t.dy)})||0,e.height(n+c.margin.top+c.margin.bottom);break;case"left":n=t.max(h.nodes(),function(t){return Math.abs(t.x)})||0,e.width(n+c.margin.left+c.margin.right);break;case"right":n=t.max(h.nodes(),function(t){return Math.abs(t.x+t.dx)})||0,e.width(n+c.margin.left+c.margin.right)}return e}var c=e.options(),d=e.getDispatcher(),f=e.getLayerOrganizer();f.create(["dummy",{main:["axis","link","label","dot"]}]);var h=new n.Force(c.labella),p=t.svg.axis();return d.on("resize",o),d.on("options",o),d.on("data",o),f.get("main.axis").classed("axis",!0),e.mixin({axis:p,visualize:o,resizeToFit:u})})})},function(t,e,n){var r,i,a;!function(o,s){i=[n(0)],r=s,void 0!==(a="function"==typeof r?r.apply(e,i):r)&&(t.exports=a)}(0,function(t){var e;e=function(){return function(){function t(t,e,n){return t.on("click",e[n+"Click"]).on("mouseover",e[n+"MouseOver"]).on("mousemove",e[n+"MouseMove"]).on("mouseout",e[n+"MouseOut"])}function e(t,e){return e?t.selectAll("*").remove():t.selectAll("*").transition().style("opacity",0).remove()}function n(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}function r(t){return n(t)?t:document.querySelector(t)}function i(t){return Array.isArray(t)?t:[].slice.call(document.querySelectorAll(t))}function a(t){t=t||{};for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];!c(i)||Array.isArray(i)||f(i)?t[r]=i:t[r]=a(t[r],i)}}return t}function o(t){t=t||{};for(var e=1;e<arguments.length;e++)if(arguments[e])for(var n in arguments[e])arguments[e].hasOwnProperty(n)&&(t[n]=arguments[e][n]);return t}function s(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)}function l(t,e,n){t.removeEventListener(e,n,!1)}function u(t,e,n){var r,i=function(){var i=this,a=arguments,o=function(){r=null,n||t.apply(i,a)},s=n&&!r;return clearTimeout(r),r=setTimeout(o,e),s&&t.apply(i,a),i};return i.isDebounced=!0,i.now=function(){return clearTimeout(r),t.apply(this,arguments)},i}function c(t){return!(!t||!m[typeof t])}function d(t){return"number"==typeof t||t&&"object"==typeof t&&x.call(t)==y||!1}function f(t){var e={};return!!t&&"[object Function]"===e.toString.call(t)}function h(t){return null==t?"":String(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function p(t,e){return null==t?"":!e&&w?w.call(t):(e=k(e),String(t).replace(new RegExp("^"+e+"+|"+e+"+$","g"),""))}function v(t){return p(t).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()}var g=Number.isNaN?Number.isNaN:window.isNaN,m={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},y="[object Number]",b=Object.prototype,x=b.toString,w=String.prototype.trim,k=function(t){return null==t?"\\s":t.source?t.source:"["+h(t)+"]"};return{$:r,$$:i,dasherize:v,debounce:u,deepExtend:a,extend:o,isElement:n,isFunction:f,isNaN:g,isNumber:d,isObject:c,on:s,off:l,trim:p,removeAllChildren:e,bindMouseEventsToDispatcher:t}}()}();var n;n=function(t){return function(e,n){function r(e,r,i){var a=i?i+"."+r:r;if(u.hasOwnProperty(a))throw"invalid or duplicate layer id: "+a;var o=e.append(n).classed(t.dasherize(r)+"-layer",!0);return u[a]=o,o}function i(e,n,a){if(Array.isArray(n))return n.map(function(t){i(e,t,a)});if(t.isObject(n)){var o=Object.keys(n)[0],s=r(e,o,a);return i(s,n[o],a?a+"."+o:o),s}return r(e,n,a)}function a(t){return i(e,t)}function o(t){return Array.isArray(t)?t.map(a):a(t)}function s(t){return u[t]}function l(t){return!!u[t]}var u={};return n=n||"g",{create:o,get:s,has:l}}}(e);var r;r=function(t,e,n){function r(r,o,s){function l(t,e){return 0===arguments.length?S:(S=t,e||W.data(t),C)}function u(t,e){return 0===arguments.length?O:(O=n.deepExtend(O,t),t&&(t.margin?d(e):t.offset&&c()),e||W.options(t),C)}function c(){R.attr("transform","translate("+(O.margin.left+O.offset[0])+","+(O.margin.top+O.offset[1])+")")}function d(t){c(),_=N-O.margin.left-O.margin.right,B=L-O.margin.top-O.margin.bottom,t||W.resize([N,L,_,B])}function f(t,e){return 0===arguments.length?O.margin:(O.margin=n.extend(O.margin,t),d(e),C)}function h(t){return 0===arguments.length?O.offset:(O.offset=t,c(),C)}function p(t,e){if(0===arguments.length||null===t||void 0===t)return N;if(N=n.isNumber(t)?+t:"auto"==t.trim().toLowerCase()?r.clientWidth:+(t+"").replace(/px/gi,"").trim(),n.isNaN(N))throw Error("invalid width: "+N);return N=Math.floor(N),_=N-O.margin.left-O.margin.right,z.attr("width",N),e||W.resize([N,L,_,B]),C}function v(t,e){if(0===arguments.length||null===t||void 0===t)return L;if(L=n.isNumber(t)?+t:"auto"==t.trim().toLowerCase()?r.clientHeight:+(t+"").replace(/px/gi,"").trim(),n.isNaN(L))throw Error("invalid height: "+L);return L=Math.floor(L),B=L-O.margin.top-O.margin.bottom,z.attr("height",L),e||W.resize([N,L,_,B]),C}function g(t,e){return 0===arguments.length?[N,L]:(p(t[0],!0),v(t[1],e),C)}function m(t){return 0===arguments.length?j:j!=t?k(t,F):C}function y(t){return 0===arguments.length?F:F!=t?k(j,t):C}function b(t){return 0===arguments.length?V:(V=null!==t&&void 0!==t&&""!==t&&!1!==t&&"false"!==(t+"").toLowerCase()&&(!!n.isNumber(t)&&(0!=+t&&+t)),C)}function x(){if(I)switch(F){case"dom":n.off(r,"resize",I);break;default:case"window":n.off(window,"resize",I)}return I=null,C}function w(t){if(t)switch(F){case"dom":n.on(r,"resize",t);break;default:case"window":n.on(window,"resize",t)}return I=t,C}function k(t,e){if(t=(!t||"false"!=(t+"").toLowerCase())&&t,e=e||F,t!=j)x(),j=t,F=e,t&&(I=n.debounce(function(){V?(E(j,!0),P(V)):E(j)},100),w(I));else if(e!=F){var r=I;x(),F=e,w(r)}return I&&I(),C}function A(){return Object.keys(W).filter(function(t){return a.indexOf(t)<0})}function M(t){var e=C;return n.isObject(t)&&Object.keys(t).forEach(function(n){e[n]=t[n]}),e}function E(t,e){switch(t){case"all":case"full":case"both":g(["auto","auto"],e);break;case"height":v("auto",e);break;default:case"width":p("auto",e)}return C}function P(t,e){var r=N,i=L;if(!n.isNumber(t))throw"Invalid ratio: must be a Number";if(t=+t,(r/i).toFixed(4)==t.toFixed(4))return C;var a=Math.floor(r/t);return a>i?p(Math.floor(i*t),e):v(a,e),C}function D(){return null!==S&&void 0!==S}function T(){return _>0&&B>0}var C={};r=n.$(r);var S=null,O=n.deepExtend({},i,o),N=0,L=0,_=0,B=0,F="window",j=!1,I=null,V=!1,z=t.select(r).append("svg"),R=z.append("g");c();var H=new e(R),q=s?s.concat(a):a,W=t.dispatch.apply(t,q);return g([O.initialWidth,O.initialHeight]),n.extend(C,{getCustomEventNames:A,getDispatcher:function(){return W},getInnerWidth:function(){return _},getInnerHeight:function(){return B},getLayerOrganizer:function(){return H},getRootG:function(){return R},getSvg:function(){return z},data:l,options:u,margin:f,offset:h,width:p,height:v,dimension:g,autoResize:m,autoResizeDetection:y,autoResizeToAspectRatio:b,hasData:D,hasNonZeroArea:T,mixin:M,resizeToFitContainer:E,resizeToAspectRatio:P}),t.rebind(C,W,"on"),C}var i={margin:{top:30,right:30,bottom:30,left:30},offset:[.5,.5],initialWidth:720,initialHeight:500},a=["data","options","resize"];return r}(t,n,e);var i;i=function(t,e){return function(){function n(n,r,i){var a=function(a,o){var s=new t(a,e.deepExtend({},n,o),r);return i&&i(s),s};return r=r||[],a.getCustomEvents=function(){return r},a}return{createChart:n}}()}(r,e);var a;a=function(t,e){function n(t,e){e()}function r(r,i,a,o){function s(e,n){return arguments.length>1?(p[e]=t.functor(n),this):t.functor(p[e])}function l(t,e,n){return s(t)(e,n)}function u(t,n){return function(r){t(r,e.debounce(function(t,e){var i=v[n];i&&i(r)}),5)}}function c(t,e,n){return p[n||e]=function(n,r){return t.property(e)(n,r)},this}function d(t,e,n){return e.forEach(function(e,r){c(t,e,n&&r<n.length?n[r]:void 0)}),this}function f(t){return o.forEach(function(e){v.on(e,t[e])}),this}function h(){return o}i=i||n,a=a||n,o=o||[];var p={},v=t.dispatch.apply(t,["enterDone","updateDone","exitDone"].concat(o)),g={getDispatcher:function(){return v},getPropertyValue:l,inheritPropertyFrom:c,inheritPropertiesFrom:d,publishEventsTo:f,getCustomEventNames:h,property:s,enter:u(r,"enterDone"),update:u(i,"updateDone"),exit:u(a,"exitDone")};return t.rebind(g,v,"on"),g}return r}(t,e);return function(t,e,n,r,i){return{factory:t,helper:e,Skeleton:n,LayerOrganizer:r,Chartlet:i}}(i,e,r,n,a)})},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";t.exports={Node:n(1),Force:n(2),Distributor:n(3),Renderer:n(10)}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,r,i){n(this,t),this.idealPos=e,this.currentPos=e,this.width=r,this.data=i,this.layerIndex=0}return r(t,[{key:"distanceFrom",value:function(t){var e=this.width/2,n=t.width/2;return Math.max(this.currentPos-e,t.currentPos-n)-Math.min(this.currentPos+e,t.currentPos+n)}},{key:"moveToIdealPosition",value:function(){return this.currentPos=this.idealPos,this}},{key:"displacement",value:function(){return this.idealPos-this.currentPos}},{key:"overlapWithNode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.distanceFrom(t)-e<0}},{key:"overlapWithPoint",value:function(t){var e=this.width/2;return t>=this.currentPos-e&&t<=this.currentPos+e}},{key:"positionBefore",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.currentLeft()-this.width/2-e}},{key:"positionAfter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.currentRight()+this.width/2+e}},{key:"currentRight",value:function(){return this.currentPos+this.width/2}},{key:"currentLeft",value:function(){return this.currentPos-this.width/2}},{key:"idealRight",value:function(){return this.idealPos+this.width/2}},{key:"idealLeft",value:function(){return this.idealPos-this.width/2}},{key:"createStub",value:function(e){var n=new t(this.idealPos,e,this.data);return n.currentPos=this.currentPos,n.child=this,this.parent=n,n}},{key:"removeStub",value:function(){return this.parent&&(this.parent.child=null,this.parent=null),this}},{key:"isStub",value:function(){return!!this.child}},{key:"getPathToRoot",value:function(){for(var t=[],e=this;e;)t.push(e),e=e.parent;return t}},{key:"getPathFromRoot",value:function(){return this.getPathToRoot().reverse()}},{key:"getPathToRootLength",value:function(){for(var t=0,e=this;e;){var n=e.parent?e.parent.currentPos:e.idealPos;t+=Math.abs(e.currentPos-n),e=e.parent}return t}},{key:"getRoot",value:function(){for(var t=this,e=this;e;)t=e,e=e.parent;return t}},{key:"getLayerIndex",value:function(){return this.layerIndex}},{key:"clone",value:function(){var e=new t(this.idealPos,this.width,this.data);return e.currentPos=this.currentPos,e.layerIndex=this.layerIndex,e}}]),t}();t.exports=i},function(t,e,n){"use strict";var r=n(3),i=n(4),a=n(8),o={nodeSpacing:3,minPos:0,maxPos:null,algorithm:"overlap",removeOverlap:!0,density:.85,stubWidth:1},s=function(t){var e={},n=i.extend({},o),s=new r,l=[],u=null;return e.nodes=function(t){return arguments.length?(l=t,u=[t.concat()],e):l},e.getLayers=function(){return u},e.options=function(t){if(!arguments.length)return n;n=i.extend(n,t);var a=i.pick(n,Object.keys(r.DEFAULT_OPTIONS));return i.isDefined(n.minPos)&&i.isDefined(n.maxPos)?a.layerWidth=n.maxPos-n.minPos:a.layerWidth=null,s.options(a),e},e.options(t),e.compute=function(){var t=i.pick(n,Object.keys(a.DEFAULT_OPTIONS));return l.forEach(function(t){t.removeStub()}),u=s.distribute(l),u.map(function(e,r){e.forEach(function(t){t.layerIndex=r}),n.removeOverlap&&a(e,t)}),e},e.start=function(){console.log("[warning] force.start() is deprecated. Please use force.compute() instead.")},e};s.DEFAULT_OPTIONS=o,t.exports=s},function(t,e,n){"use strict";var r=n(4),i=n(6),a={algorithm:"overlap",layerWidth:1e3,density:.75,nodeSpacing:3,stubWidth:1},o=function(t){var e={};t=r.extend({},a,t),e.options=function(n){return arguments.length?(t=r.extend(t,n),e):t},e.computeRequiredWidth=function(e){return r.sum(e,function(e){return e.width+t.nodeSpacing})-t.nodeSpacing},e.maxWidthPerLayer=function(){return t.density*t.layerWidth},e.needToSplit=function(t){return e.estimateRequiredLayers(t)>1},e.estimateRequiredLayers=function(n){return t.layerWidth?Math.ceil(e.computeRequiredWidth(n)/e.maxWidthPerLayer()):1};var n={simple:function(n){for(var r=e.estimateRequiredLayers(n),i=[],a=0;a<r;a++)i.push([]);return n.forEach(function(e,n){var a=n%r;i[a].push(e);for(var o=e,s=a-1;s>=0;s--)o=o.createStub(t.stubWidth),i[s].push(o)}),i},roundRobin:function(t){return[]},overlap:function(n){for(var r=[],i=e.maxWidthPerLayer(),a=n.concat(),o=e.computeRequiredWidth(a);o>i;){e.countIdealOverlaps(a);var s=a.concat(),l=o;for(a=[];s.length>2&&l>i;){s.sort(function(t,e){return e.overlapCount-t.overlapCount});var u=s.shift();l-=u.width,l+=t.stubWidth,u.overlaps.forEach(function(t){t.overlapCount--}),a.push(u)}r.push(s),o=e.computeRequiredWidth(a)}a.length>0&&r.push(a);for(var c=r.length-1;c>=1;c--)for(var d=r[c],f=0;f<d.length;f++){var h=d[f];if(!h.isStub())for(var p=h,v=c-1;v>=0;v--)p=p.createStub(t.stubWidth),r[v].push(p)}return r}};return e.countIdealOverlaps=function(e){var n=new i(t.layerWidth/2);return e.forEach(function(t){n.add([t.idealLeft(),t.idealRight(),t])}),e.forEach(function(t){var e=n.search(t.idealLeft(),t.idealRight());t.overlaps=e.map(function(t){return t.data[2]}),t.overlapCount=e.length}),e},e.distribute=function(i){if(!i||0===i.length)return[];if("none"==t.algorithm||!r.isDefined(t.algorithm))return[i];if(!e.needToSplit(i))return[i];var a=i.concat().sort(function(t,e){return t.idealPos-e.idealPos});if("function"==typeof t.algorithm)return t.algorithm(a,t);if(n.hasOwnProperty(t.algorithm))return n[t.algorithm](a);throw"Unknown algorithm: "+t.algorithm},e};o.DEFAULT_OPTIONS=a,t.exports=o},function(t,e,n){"use strict";var r={isDefined:function(t){return null!==t&&void 0!==t},last:function(t){return t.length>0?t[t.length-1]:null},pick:function(t,e){return e.reduce(function(e,n){return e[n]=t[n],e},{})},sum:function(t,e){return t.map(e).reduce(function(t,e){return t+e},0)}};r.extend=n(5),t.exports=r},function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},o=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e=r.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&r.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!n)return!1;var a;for(a in t);return void 0===a||r.call(t,a)};t.exports=function t(){var e,r,i,s,l,u,c=arguments[0],d=1,f=arguments.length,h=!1;for("boolean"==typeof c?(h=c,c=arguments[1]||{},d=2):("object"!==(void 0===c?"undefined":n(c))&&"function"!=typeof c||null==c)&&(c={});d<f;++d)if(null!=(e=arguments[d]))for(r in e)i=c[r],s=e[r],c!==s&&(h&&s&&(o(s)||(l=a(s)))?(l?(l=!1,u=i&&a(i)?i:[]):u=i&&o(i)?i:{},c[r]=t(h,u,s)):void 0!==s&&(c[r]=s));return c}},function(t,e,n){"use strict";function r(t,e){if(e||(e={}),this.startKey=e.startKey||0,this.endKey=e.endKey||1,this.intervalHash={},this.pointTree=new u({compare:function(t,e){if(null==t)return-1;if(null==e)return 1;var n=t[0]-e[0];return n>0?1:0==n?0:-1}}),this._autoIncrement=0,!t||"number"!=typeof t)throw new Error("you must specify center index as the 2nd argument.");this.root=new s(t,this)}function i(t,e){return e.end<t.idx?(t.left||(t.left=new s(e.start+e.end>>1,this)),i.call(this,t.left,e)):t.idx<e.start?(t.right||(t.right=new s(e.start+e.end>>1,this)),i.call(this,t.right,e)):t.insert(e)}function a(t,e,n){if(t)return e<t.idx?(t.starts.every(function(t){var r=t.start<=e;return r&&n.push(t.result()),r}),a.call(this,t.left,e,n)):e>t.idx?(t.ends.every(function(t){var r=t.end>=e;return r&&n.push(t.result()),r}),a.call(this,t.right,e,n)):void t.starts.map(function(t){n.push(t.result())})}function o(t,e,n){if(e-t<=0)throw new Error("end must be greater than start. start: "+t+", end: "+e);var r={},i=[];a.call(this,this.root,t+e>>1,i,!0),i.forEach(function(t){r[t.id]=!0});for(var o=this.pointTree.bsearch([t,null]),s=this.pointTree;o>=0&&s[o][0]==t;)o--;var l=this.pointTree.bsearch([e,null]);if(l>=0){for(var u=s.length-1;l<=u&&s[l][0]<=e;)l++;s.slice(o+1,l).forEach(function(t){var e=t[1];r[e]=!0},this),Object.keys(r).forEach(function(r){var i=this.intervalHash[r];n.push(i.result(t,e))},this)}}function s(t){this.idx=t,this.starts=new u({compare:function(t,e){if(null==t)return-1;if(null==e)return 1;var n=t.start-e.start;return n>0?1:0==n?0:-1}}),this.ends=new u({compare:function(t,e){if(null==t)return-1;if(null==e)return 1;var n=t.end-e.end;return n<0?1:0==n?0:-1}})}function l(t,e,n,r){if(this.id=e,this.start=t[n],this.end=t[r],this.data=t,"number"!=typeof this.start||"number"!=typeof this.end)throw new Error("start, end must be number. start: "+this.start+", end: "+this.end);if(this.start>=this.end)throw new Error("start must be smaller than end. start: "+this.start+", end: "+this.end)}var u=n(7);r.prototype.add=function(t,e){if(this.intervalHash[e])throw new Error("id "+e+" is already registered.");if(void 0==e){for(;this.intervalHash[this._autoIncrement];)this._autoIncrement++;e=this._autoIncrement}var n=new l(t,e,this.startKey,this.endKey);this.pointTree.insert([n.start,e]),this.pointTree.insert([n.end,e]),this.intervalHash[e]=n,this._autoIncrement++,i.call(this,this.root,n)},r.prototype.search=function(t,e){var n=[];if("number"!=typeof t)throw new Error(t+": invalid input");if(void 0==e)a.call(this,this.root,t,n);else{if("number"!=typeof e)throw new Error(t+","+e+": invalid input");o.call(this,t,e,n)}return n},r.prototype.remove=function(t){},s.prototype.insert=function(t){this.starts.insert(t),this.ends.insert(t)},l.prototype.result=function(t,e){var n={id:this.id,data:this.data};if("number"==typeof t&&"number"==typeof e){var r=Math.max(this.start,t),i=Math.min(this.end,e),a=i-r;n.rate1=a/(e-t),n.rate2=a/(this.end-this.start)}return n},t.exports=r},function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function t(){var e=null,r={},i=arguments;["0","1"].forEach(function(t){var a=i[t];Array.isArray(a)?e=a:a&&"object"==(void 0===a?"undefined":n(a))&&(r=a)}),"function"==typeof r.filter&&(this._filter=r.filter),"function"==typeof r.compare?this._compare=r.compare:"string"==typeof r.compare&&t.compares[r.compare]&&(this._compare=t.compares[r.compare]),this._unique=!!r.unique,r.resume&&e?e.forEach(function(t,e){this.push(t)},this):e&&this.insert.apply(this,e)};r.create=function(t,e){return new r(t,e)},r.prototype=new Array,r.prototype.constructor=Array.prototype.constructor,r.prototype.insertOne=function(t){var e=this.bsearch(t);return(!this._unique||null==this.key(t,e))&&!!this._filter(t,e)&&(this.splice(e+1,0,t),e+1)},r.prototype.insert=function(){return Array.prototype.map.call(arguments,function(t){return this.insertOne(t)},this)},r.prototype.remove=function(t){return this.splice(t,1),this},r.prototype.bsearch=function(t){if(!this.length)return-1;for(var e,n=0,r=this.length;r-n>1;){e=Math.floor((n+r)/2);var i=this[e],a=this._compare(t,i);if(0==a)return e;a>0?n=e:r=e}return 0==n&&this._compare(this[0],t)>0?-1:n},r.prototype.key=function(t,e){null==e&&(e=this.bsearch(t));var n=e;if(-1==n||this._compare(this[n],t)<0)return n+1<this.length&&0==this._compare(this[n+1],t)?n+1:null;for(;n>=1&&0==this._compare(this[n-1],t);)n--;return n},r.prototype.keys=function(t,e){var n=[];null==e&&(e=this.bsearch(t));for(var r=e;r>=0&&0==this._compare(this[r],t);)n.push(r),r--;var i=this.length;for(r=e+1;r<i&&0==this._compare(this[r],t);)n.push(r),r++;return n.length?n:null},r.prototype.unique=function(t){if(t)return this.filter(function(t,e){return 0==e||0!=this._compare(this[e-1],t)},this);var e=0;return this.map(function(t,n){return 0==n||0!=this._compare(this[n-1],t)?null:n-e++},this).forEach(function(t){null!=t&&this.remove(t)},this),this},r.prototype.toArray=function(){return this.slice()},r.prototype._filter=function(t,e){return!0},r.compares={number:function(t,e){var n=t-e;return n>0?1:0==n?0:-1},string:function(t,e){return t>e?1:t==e?0:-1}},r.prototype._compare=r.compares.string,t.exports=r},function(t,e,n){"use strict";function r(t){var e=new o.Variable(t.targetPos);return e.node=t,e}function i(t,e){if(t.length>0){e=a.extend(s,e),t.forEach(function(t,e){t.targetPos=t.parent?t.parent.currentPos:t.idealPos,t.index=e});for(var n=t.concat().sort(function(t,e){var n=t.targetPos-e.targetPos;if(0!==n)return n;var r=t.isStub()-e.isStub();return 0!==r?r:t.index-e.index}).map(r),i=[],l=1;l<n.length;l++){var u=n[l-1],c=n[l],d=void 0;d=u.node.isStub()&&c.node.isStub()?(u.node.width+c.node.width)/2+e.lineSpacing:(u.node.width+c.node.width)/2+e.nodeSpacing,i.push(new o.Constraint(u,c,d))}if(a.isDefined(e.minPos)){var f=new o.Variable(e.minPos,1e10),h=n[0];i.push(new o.Constraint(f,h,h.node.width/2)),n.unshift(f)}if(a.isDefined(e.maxPos)){var p=new o.Variable(e.maxPos,1e10),v=a.last(n);i.push(new o.Constraint(v,p,v.node.width/2)),n.push(p)}new o.Solver(n,i).solve(),n.filter(function(t){return t.node}).map(function(t){return t.node.currentPos=Math.round(t.position()),t})}return t}var a=n(4),o=n(9),s={lineSpacing:2,nodeSpacing:3,minPos:0,maxPos:null};i.DEFAULT_OPTIONS=s,t.exports=i},function(t,e){"use strict";var n={},r=function(){function t(t){this.scale=t,this.AB=0,this.AD=0,this.A2=0}return t.prototype.addVariable=function(t){var e=this.scale/t.scale,n=t.offset/t.scale,r=t.weight;this.AB+=r*e*n,this.AD+=r*e*t.desiredPosition,this.A2+=r*e*e},t.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},t}();n.PositionStats=r;var i=function(){function t(t,e,n,r){void 0===r&&(r=!1),this.left=t,this.right=e,this.gap=n,this.equality=r,this.active=!1,this.unsatisfiable=!1,this.left=t,this.right=e,this.gap=n,this.equality=r}return t.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},t}();n.Constraint=i;var a=function(){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=1),this.desiredPosition=t,this.weight=e,this.scale=n,this.offset=0}return t.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},t.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},t.prototype.visitNeighbours=function(t,e){var n=function(n,r){return n.active&&t!==r&&e(n,r)};this.cOut.forEach(function(t){return n(t,t.right)}),this.cIn.forEach(function(t){return n(t,t.left)})},t}();n.Variable=a;var o=function(){function t(t){this.vars=[],t.offset=0,this.ps=new r(t.scale),this.addVariable(t)}return t.prototype.addVariable=function(t){t.block=this,this.vars.push(t),this.ps.addVariable(t),this.posn=this.ps.getPosn()},t.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var t=0,e=this.vars.length;t<e;++t)this.ps.addVariable(this.vars[t]);this.posn=this.ps.getPosn()},t.prototype.compute_lm=function(t,e,n){var r=this,i=t.dfdv();return t.visitNeighbours(e,function(e,a){var o=r.compute_lm(a,t,n);a===e.right?(i+=o*e.left.scale,e.lm=o):(i+=o*e.right.scale,e.lm=-o),n(e)}),i/t.scale},t.prototype.populateSplitBlock=function(t,e){var n=this;t.visitNeighbours(e,function(e,r){r.offset=t.offset+(r===e.right?e.gap:-e.gap),n.addVariable(r),n.populateSplitBlock(r,t)})},t.prototype.traverse=function(t,e,n,r){var i=this;void 0===n&&(n=this.vars[0]),void 0===r&&(r=null),n.visitNeighbours(r,function(r,a){e.push(t(r)),i.traverse(t,e,a,n)})},t.prototype.findMinLM=function(){var t=null;return this.compute_lm(this.vars[0],null,function(e){!e.equality&&(null===t||e.lm<t.lm)&&(t=e)}),t},t.prototype.findMinLMBetween=function(t,e){this.compute_lm(t,null,function(){});var n=null;return this.findPath(t,null,e,function(t,e){!t.equality&&t.right===e&&(null===n||t.lm<n.lm)&&(n=t)}),n},t.prototype.findPath=function(t,e,n,r){var i=this,a=!1;return t.visitNeighbours(e,function(e,o){a||o!==n&&!i.findPath(o,t,n,r)||(a=!0,r(e,o))}),a},t.prototype.isActiveDirectedPathBetween=function(t,e){if(t===e)return!0;for(var n=t.cOut.length;n--;){var r=t.cOut[n];if(r.active&&this.isActiveDirectedPathBetween(r.right,e))return!0}return!1},t.split=function(e){return e.active=!1,[t.createSplitBlock(e.left),t.createSplitBlock(e.right)]},t.createSplitBlock=function(e){var n=new t(e);return n.populateSplitBlock(e,null),n},t.prototype.splitBetween=function(e,n){var r=this.findMinLMBetween(e,n);if(null!==r){var i=t.split(r);return{constraint:r,lb:i[0],rb:i[1]}}return null},t.prototype.mergeAcross=function(t,e,n){e.active=!0;for(var r=0,i=t.vars.length;r<i;++r){var a=t.vars[r];a.offset+=n,this.addVariable(a)}this.posn=this.ps.getPosn()},t.prototype.cost=function(){for(var t=0,e=this.vars.length;e--;){var n=this.vars[e],r=n.position()-n.desiredPosition;t+=r*r*n.weight}return t},t}();n.Block=o;var s=function(){function t(t){this.vs=t;var e=t.length;for(this.list=new Array(e);e--;){var n=new o(t[e]);this.list[e]=n,n.blockInd=e}}return t.prototype.cost=function(){for(var t=0,e=this.list.length;e--;)t+=this.list[e].cost();return t},t.prototype.insert=function(t){t.blockInd=this.list.length,this.list.push(t)},t.prototype.remove=function(t){var e=this.list.length-1,n=this.list[e];this.list.length=e,t!==n&&(this.list[t.blockInd]=n,n.blockInd=t.blockInd)},t.prototype.merge=function(t){var e=t.left.block,n=t.right.block,r=t.right.offset-t.left.offset-t.gap;e.vars.length<n.vars.length?(n.mergeAcross(e,t,r),this.remove(e)):(e.mergeAcross(n,t,-r),this.remove(n))},t.prototype.forEach=function(t){this.list.forEach(t)},t.prototype.updateBlockPositions=function(){this.list.forEach(function(t){return t.updateWeightedPosition()})},t.prototype.split=function(t){var e=this;this.updateBlockPositions(),this.list.forEach(function(n){var r=n.findMinLM();null!==r&&r.lm<l.LAGRANGIAN_TOLERANCE&&(n=r.left.block,o.split(r).forEach(function(t){return e.insert(t)}),e.remove(n),t.push(r))})},t}();n.Blocks=s;var l=function(){function t(t,e){this.vs=t,this.cs=e,this.vs=t,t.forEach(function(t){t.cIn=[],t.cOut=[]}),this.cs=e,e.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),this.inactive=e.map(function(t){return t.active=!1,t}),this.bs=null}return t.prototype.cost=function(){return this.bs.cost()},t.prototype.setStartingPositions=function(t){this.inactive=this.cs.map(function(t){return t.active=!1,t}),this.bs=new s(this.vs),this.bs.forEach(function(e,n){return e.posn=t[n]})},t.prototype.setDesiredPositions=function(t){this.vs.forEach(function(e,n){return e.desiredPosition=t[n]})},t.prototype.mostViolated=function(){for(var e=Number.MAX_VALUE,n=null,r=this.inactive,i=r.length,a=i,o=0;o<i;++o){var s=r[o];if(!s.unsatisfiable){var l=s.slack();if((s.equality||l<e)&&(e=l,n=s,a=o,s.equality))break}}return a!==i&&(e<t.ZERO_UPPERBOUND&&!n.active||n.equality)&&(r[a]=r[i-1],r.length=i-1),n},t.prototype.satisfy=function(){null==this.bs&&(this.bs=new s(this.vs)),this.bs.split(this.inactive);for(var e=null;(e=this.mostViolated())&&(e.equality||e.slack()<t.ZERO_UPPERBOUND&&!e.active);){var n=e.left.block;if(n!==e.right.block)this.bs.merge(e);else{if(n.isActiveDirectedPathBetween(e.right,e.left)){e.unsatisfiable=!0;continue}var r=n.splitBetween(e.left,e.right);if(null===r){e.unsatisfiable=!0;continue}this.bs.insert(r.lb),this.bs.insert(r.rb),this.bs.remove(n),this.inactive.push(r.constraint),e.slack()>=0?this.inactive.push(e):this.bs.merge(e)}}},t.prototype.solve=function(){this.satisfy();for(var t=Number.MAX_VALUE,e=this.bs.cost();Math.abs(t-e)>1e-4;)this.satisfy(),t=e,e=this.bs.cost();return e},t.LAGRANGIAN_TOLERANCE=-1e-4,t.ZERO_UPPERBOUND=-1e-10,t}();n.Solver=l,t.exports=n},function(t,e,n){"use strict";function r(t){this.options=u.extend({layerGap:60,nodeHeight:10,direction:"down"},t)}function i(t){return"L "+t.join(" ")}function a(t){return"M "+t.join(" ")}function o(t,e,n){return"C "+t.join(" ")+" "+e.join(" ")+" "+n.join(" ")}function s(t,e){var n=(t[1]+e[1])/2;return o([t[0],n],[e[0],n],e)}function l(t,e){var n=(t[0]+e[0])/2;return o([n,t[1]],[n,e[1]],e)}var u=n(4);r.lineTo=i,r.moveTo=a,r.curveTo=o,r.vCurveBetween=s,r.hCurveBetween=l,r.prototype.getWaypoints=function(t){var e=this.options,n=e.direction,r=t.getPathFromRoot(),i=e.nodeHeight+e.layerGap;return"left"===n?[[[0,r[0].idealPos]]].concat(r.map(function(t,n){var r=i*(n+1)*-1;return[[r+e.nodeHeight,t.currentPos],[r,t.currentPos]]})):"right"===n?[[[0,r[0].idealPos]]].concat(r.map(function(t,n){var r=i*(n+1);return[[r-e.nodeHeight,t.currentPos],[r,t.currentPos]]})):"up"===n?[[[r[0].idealPos,0]]].concat(r.map(function(t,n){var r=i*(n+1)*-1;return[[t.currentPos,r+e.nodeHeight],[t.currentPos,r]]})):[[[r[0].idealPos,0]]].concat(r.map(function(t,n){var r=i*(n+1);return[[t.currentPos,r-e.nodeHeight],[t.currentPos,r]]}))},r.prototype.layout=function(t){var e=this.options,n=e.layerGap+e.nodeHeight;switch(e.direction){case"left":t.forEach(function(t){var r=t.getLayerIndex()*n+e.layerGap;t.x=-r-e.nodeHeight,t.y=t.currentPos,t.dx=e.nodeHeight,t.dy=t.width});break;case"right":t.forEach(function(t){var r=t.getLayerIndex()*n+e.layerGap;t.x=r,t.y=t.currentPos,t.dx=e.nodeHeight,t.dy=t.width});break;case"up":t.forEach(function(t){var r=t.getLayerIndex()*n+e.layerGap;t.x=t.currentPos,t.y=-r-e.nodeHeight,t.dx=t.width,t.dy=e.nodeHeight});break;default:case"down":t.forEach(function(t){var r=t.getLayerIndex()*n+e.layerGap;t.x=t.currentPos,t.y=r,t.dx=t.width,t.dy=e.nodeHeight})}return t},r.prototype.generatePath=function(t){var e=this.options,n=e.direction,r=this.getWaypoints(t,n),o=[a(r[0][0])];return"left"===n||"right"===n?r.reduce(function(t,e,n){return o.push(l(t[t.length-1],e[0])),n<r.length-1&&o.push(i(e[1])),e}):r.reduce(function(t,e,n){return o.push(s(t[t.length-1],e[0])),n<r.length-1&&o.push(i(e[1])),e}),o.join(" ")},t.exports=r}])})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),"function"!=typeof Object.assign&&function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}}();var r;!function(t){function e(t){return t&&t.trim()}function n(t){return!isNaN(parseFloat(t))&&isFinite(t)}function r(){for(var t=document.scripts,e=0;e<t.length;++e){var n=t[e],r=n.src;if(r&&r.indexOf("/viz.")>=0){var i=r.indexOf("/",9);if(i>=0)return r.substring(0,i)}}return""}function i(t,e,n,r,i,a,o){void 0===o&&(o=0),t.each(function(){var t=d3.select(this),s=t.select(e).node(),l=t.select(n).node();if(s&&l&&s.textContent){var u=s.getBBox(),c=Number(t.attr("data-dx"));if(0!=c){var d=u.x,f=-c+r,h=a-r-u.width-c;d<f?(u.x=f,d3.select(s).attr("x",f-d)):d>h&&(u.x=h,d3.select(s).attr("x",h-d))}d3.select(l).attr("width",u.width+2*r).attr("height",u.height+2*i).attr("x",u.x-r).attr("y",u.y-i).attr("rx",o).attr("ry",o)}})}function a(t,e,n,r,a){function o(t){t.reverse();for(var e=[],n=0,r=t;n<r.length;n++){var i=r[n];e.indexOf(i)<0&&e.push(i)}e.reverse();var a=e.length;if(a>0&&!w.isIE()){for(var o=e[0],s=o.parentNode,l=s.childNodes,u=!0,c=0;c<a;++c)if(l[l.length-a+c]!=e[c]){u=!1;break}if(!u)for(var d=0,f=e;d<f.length;d++){var i=f[d],h=i.parentNode;h.appendChild(i)}}}function s(t){return e.select(".node[data-id='"+t+"']")}function l(){return e.select("[data-root]")}function u(t){var n=t.id,l=n==r?"root":"node",u=s(n).attr("data-highlight",l);u.select(".text").text(t.desc),i(u,".text",".text-bg",a?2:5,2,h);var c=e.selectAll("[data-source-id='"+n+"'],[data-target-id='"+n+"']").attr("data-highlight",l);i(c,".desc",".desc-bg",3,2,h),window.clearTimeout(f);var d=[];c.each(function(t){function e(t){t!=n&&d.push(s(t).node())}d.push(this),e(t.source.id),e(t.target.id)}),d.push(u.node()),o(d)}function c(){var t=[];e.select(".node").each(function(){t.push(this)}),t.push(l().node()),o(t)}function d(t){e.selectAll("[data-highlight]").attr("data-highlight","false"),e.select(".node[data-id='"+t.id+"']").select(".text").text(t.text).attr("x",0),f=window.setTimeout(c,1e3)}var f,h=t.container.getBoundingClientRect().width,p=e.select("g.nodes");p.empty()&&(p=e.append("g").attr("class","nodes")),p.style("pointer-events","all");var v=p.selectAll(".node").data(n),g=v.enter().append("svg:a").attr("class","node").attr("data-leaf",function(t){return!t.children||0==t.children.length}).attr("data-id",function(t){return t.id}).attr("data-root",function(t){return t.root}).attr("data-old",function(t){return t.old}).attr("data-d",function(t){return t.distance}).attr("xlink:href",function(e){return e.root?null:y(t)(e)}).attr("data-clickable",function(e){return!(e.root||!t.getClickHandler(e))||null}).on("click",function(e){var n=d3.event;e.root||t.invokeClickHandler(e)&&n.preventDefault()});return w.onEvent("mouseover",p.node(),g,u),w.onEvent("mouseout",p.node(),g,d),g.append("circle").attr("r",C),g.append("text").attr("class","icon").text(function(t){return t.icon}),g.append("rect").attr("class","text-bg"),g.append("text").attr("class","text").text(function(t){return t.text}),c(),v}function o(t){return d3.select(t).append("svg")}function s(t){var e=[{x:0,y:0},{x:1,y:.5},{x:1,y:-.5},{x:0,y:0}];return d3.svg.line().x(function(e){return t*e.x}).y(function(e){return t*e.y}).interpolate("linear")(e)}function l(t){return{standard:t.toString(),light:t.brighter(1.15).toString(),bright:d3.hsl(t.h,1.3*t.s,.9*t.l).toString()}}function u(t,e){for(var n=[],r=360/e+1,i=t.h,a=0;a<e;++a)t.h=(i+a*r)%360,n.push(l(t));return n}function c(t,e,n){return"<"+t+' class="'+n+'">'+e+"</"+t+">"}function d(t,e,n,r){n&&r?t.append("a").attr("href","javascript:void(0);").attr("class","source").text(e).on("click",function(){var t=d3.event,i=(t.target,[]);if(n&&n.length)for(var a=0,o=n;a<o.length;a++){var s=o[a];if("object"==typeof s){var l=s.title?"<strong class='bizq-divider'>"+s.title+"</strong>":"";s=l+s.content}i.push(c("div",s,"snippet"))}var u=c("div",i.join(),"snippets"),d=u.replace('width="','_width="');r(e+" (Auszug aus dem Original)",d),t.preventDefault()}):t.append("span").attr("class","source").text(e)}function f(t){return"reverse"===t.stringValue("chronology")}function h(t,e){var n=(window.dataDomain||r())+"/search.json";E&&E.abort();var i="?"+M.toQueryString({query:t});E=d3.json(n+i,e)}function p(t,e){var n={};return Object.assign(n,t),Object.assign(n,e),n}function v(t,e){var n={};Object.assign(n,t);for(var r=0;r<e.attributes.length;++r){var i=e.attributes[r],a=i.name;if(0===a.indexOf("data-")){var o=M.camelCased(a.substring(5));n[o]=n[o]||i.value}}return n}function g(t){return v({},t)}function m(t){return d3.hsl(t.stringValue("rootColor")||"#00dddd")}function y(t){return t.handlerValue("linkify")||G}function b(t,e){var n=t.accuracy;"€"==t.prefix&&(e="$"+e,t.prefix="");var r=x().numberFormat(e);return function(e){return t.prefix+r(e/n)+t.postfix}}function x(){return d3.locale({decimal:",",thousands:".",grouping:[3],currency:["€",""],dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]})}!function(t){function e(t){return r({},t)}function n(t,n){return r(e(t),n)}function r(t,e){return Object.assign(t,e),t}t.clone=e,t.concat=n,t.mixin=r}(t.Helpers||(t.Helpers={}));var w;!function(t){function e(t){return[t.width,t.height]}function n(t,e){d3.select(t).style("height",e+"px")}function r(t,e){var n=void 0,r=[];return t.each(function(){for(var t=this;"function"==typeof t.parentNode.matches&&!n;)t=t.parentNode,t.matches(e)&&(n=t,r.push(n));n=void 0}),d3.selectAll(r)}function i(t,e){for(;;){if(!t||!e)return!1;if(t.isSameNode(e))return!0;t=t.parentNode}}function a(t,e,n,r){d3.select(e).on(t,function(){try{var t=d3.event,a=n;"string"==typeof a&&(a=d3.select(e).selectAll(a)),a.each(function(){var e=this;i(t.target,e)&&r.bind(e)(d3.select(e).data()[0])})}catch(t){throw console.error(t),t}})}function o(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>=0||t.indexOf("Edge ")>=0||t.indexOf("Trident")>=0}t.size=e,t.setHeight=n,t.closest=r,t.isDescendant=i,t.onEvent=a,t.isIE=o}(w=t.Dom||(t.Dom={}));var k;!function(t){for(var e=document.querySelectorAll("form.managed"),n=0;n<e.length;++n){var r=e[n];!function(t){function e(e,n){if(n){t.classList.add(e);var r=t.querySelector("."+e+".message p");r&&(r.textContent=n)}else t.classList.remove(e)}function n(t){e("error",t)}function r(t){e("success",t)}var i=t.querySelector("[type='submit']");t.onsubmit=function(){n(),r();var e=new FormData(t),a=new XMLHttpRequest;return a.open(t.method,t.action,!0),a.onload=function(e){var o=a.getResponseHeader("Content-Type").split(";")[0],s=a.response;switch(o){case"application/json":s=JSON.parse(s).message}if(a.status>=400)i.classList.remove("loading"),n(s);else if("application/json"==o&&s)r(s);else{var l=t.getAttribute("target-url");document.location.assign(l||"/")}i.classList.remove("loading")},a.send(e),i.classList.add("loading"),!1}}(r)}}(k||(k={}));var A;!function(t){function e(t,e){var n=d3.select("bizq-modal");if(n.empty()){n=d3.select("body").append("div").attr("class","bizq-modal").on("click",function(){d3.event.target==n.node()&&n.style("display","none")});var r=n.append("div").attr("class","bizq-modal-content"),i=r.append("div").attr("class","bizq-modal-header");i.append("span").attr("class","close").html("&times;").on("click",function(){n.style("display","none")}),i.append("h3");r.append("div").attr("class","bizq-modal-body"),r.append("div").attr("class","bizq-modal-footer")}n.style("display","block"),n.select("h2, h3").html(t),n.select(".bizq-modal-body").html(e)}t.showPopup=e}(A||(A={}));var M;!function(t){function e(t){if(t){var e=document.createElement("div");return e.innerHTML=t,e.innerText||e.textContent}}function n(t){return t&&(t=encodeURIComponent(t).replace(/%20/g,"+")),t}function r(t){return t&&(t=decodeURIComponent(t.replace(/\+/g,"%20"))),t}function i(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}function a(t){for(var e={},n=("?"===t[0]?t.substr(1):t).split("&"),i=0;i<n.length;i++){var a=n[i].split("=");e[r(a[0])]=r(a[1]||"")}return e}function o(t){var e=[];for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];"object"==typeof i&&(i=JSON.stringify(i)),"string"!=typeof i&&"number"!=typeof i||e.push(n(r)+"="+n(i))}return e.join("&")}t.unescape=e,t.encode=n,t.decode=r,t.camelCased=i,t.fromQueryString=a,t.toQueryString=o}(M=t.Strings||(t.Strings={}));var E,P={draw:function(){}},D=function(t,e){if(!e.item||0==e.item.length)throw new Error("no data");for(var n=(t.container,[]),r=0,i=e.item;r<i.length;r++){var a=i[r];!function(e){var r=e.data,i=document.createElement("div"),a=d3.select(i).attr("data-item",e.item).attr("class","root"),o=a.append("div").attr("class","box-parent");t.showItem(e.title,i);var s=d3.select(t.nodeValue("legend1"));s.empty()&&(s=a.selectAll(".legend1"));var l=d3.select(t.nodeValue("legend2"));l.empty()&&(l=a.selectAll(".legend2"));var u=d3.select(t.nodeValue("legend3"));if(u.empty()&&(u=a.selectAll(".legend3")),s.empty()||l.empty()||u.empty()){var c=a.selectAll(".legends");c.empty()&&(c=a.append("div").attr("class","legends")),s.empty()&&(s=c.append("span").attr("class","legend1")),l.empty()&&(l=c.append("span").attr("class","legend2")),u.empty()&&(u=c.append("span").attr("class","legend3"))}u.text("Stand: "+e.date);var d=b(r.numberFormat,",.3r"),f=(r.root.raw,null),h=function(t){t.children||f&&f!=t||(o.classed("highlighting",!0),d3.selectAll(".highlighted").classed("highlighted",!1),d3.select(this).classed("highlighted",!0),y(t))},p=function(){f||(o.classed("highlighting",!1),d3.selectAll(".highlighted").classed("highlighted",!1),y(r.default||r.root))},v=function(t){f==t?(f=null,p()):(f=t,h.call(this,t))},g=function(t){return t&&t.indexOf("Fehlbetrag")>=0},y=function(t){s.text(d(t.raw)+" "),l.text(t.name)};p(),function(e){function n(t,e,r,i){t.color=e.toString();var a=r;if(t.children){var o=t.children.length+1;if(o>0)for(var s=(i-r)/o,l=0,u=t.children;l<u.length;l++){var c=u[l];e.h=a%360,n(c,e,a,a+s),a+=s}}}var r=m(t);n(e,r,r.h,r.h+360)}(r.root);var x=function(){var t=o.node().getBoundingClientRect();if(0!=t.width&&0!=t.height){var e=d3.layout.treemap().size(w.size(t)).value(function(t){return Math.abs(t.raw)}).sort(null),n=o.datum(r.root).selectAll(".box").data(e.nodes),i=n.enter().append("div").attr("class","box").on("mouseenter",h).on("mouseleave",p).on("click",v).attr("data-neg",function(t){return!!(t.raw<0||g(t.name))||null});i.append("div").attr("class","value").text(function(t){return t.children?null:d(t.value)}),i.append("div").attr("class","desc").text(function(t){return t.children?null:t.name}),n.attr("data-small",function(t){return t.dx<40||t.dy<32||null}).style("left",function(t){return t.x+"px"}).style("top",function(t){return t.y+"px"}).style("width",function(t){return Math.max(0,t.dx-1)+"px"}).style("height",function(t){return Math.max(0,t.dy-1)+"px"}).style("background",function(t){return t.children?"white":t.color})}};n.push(x)}(a)}return{draw:function(){for(var t=0,e=n;t<e.length;t++){(0,e[t])()}}}},T=function(t,e){if("undefined"==typeof nv)throw new Error("NV library not found");var n=[];if(!e.item||0==e.item.length)throw new Error("no data");for(var r=0,i=e.item;r<i.length;r++){var a=i[r];!function(e){for(var r=e.data,i=t.options.colors,a="string"==typeof i?i.split("|"):i,o=r.barColors,s=r.colorIndexes,l=0;l<o.length;++l){var u=s[l];a&&a[u]&&(o[l]=a[u])}var c=nv.models.discreteBarChart().x(function(t){return t.year}).y(function(t){return t.value0}).color(r.barColors).staggerLabels(!1).showValues(!1).duration(0),d=d3.extent(r.data,function(t){return t.value0}),f=d[0],h=d[1];f<0&&h<0&&(h=0),f>0&&h>0&&(f=0);var p=c.yAxis.scale().domain([f,h]).nice(3);c.yAxis.tickFormat(b(r.numberFormat,",.0f")).showMaxMin(!1).scale(p).ticks(5),c.tooltip.contentGenerator(function(t){var n=t.data,r=n.note?"<span class='note'>"+n.note+"</span>":"";return"<span class='name'>"+e.title+" "+n.year+"</span><span class='value'>"+n.formattedValue+"</span>"+r+"<span class='source'>Quelle: "+n.source.publicationTitle+"</span>"});var v=[{key:"key",values:r.data}],g=document.createElement("div");d3.select(g).style("height","100%").append("svg").datum(v).call(c),g.setAttribute("data-item",e.item),t.showItem(e.title,g),n.push(c.update)}(a)}return{draw:function(){for(var t=0,e=n;t<e.length;t++){(0,e[t])()}}}},C=20,S=8,O=function(t,e){function n(){for(var n,o=r.getBoundingClientRect().width,c={left:-o/6,right:o/6,top:-C,bottom:C+18},d={left:-S,right:o/3-S,top:-S,bottom:S},f=i?d:c,h=c,p=[c.bottom-c.top,c.right-c.left],v=[d.bottom-d.top,d.right-d.left],g=i?v:p,m=i?7:12,y=d3.layout.cluster().nodeSize(g).separation(function(t,e){var n=t.parent==e.parent;if(i){if(n)return 1;var r=1*(t.parent.children.length+e.parent.children.length)/2+1.5,a=5-r;return r<5?1.5+a:1.5}return n?1:1.4}),b=y,x=b.nodes(e),k=b.links(x),A=0,M=0,E=x;M<E.length;M++){var P=E[M];P.root&&(n=P),A=Math.max(A,P.depth)}u.select("g").remove();var D=u.append("g"),T=D.append("g").selectAll(".link").data(k),O=function(t){return t.target&&t.target.edge||{}},N=T.enter().append("g").attr("class","link").attr("data-source-id",function(t){return t.source.id}).attr("data-target-id",function(t){return t.target.id}).attr("data-old",function(t){return O(t).old}).attr("data-head",function(t){return O(t).head}).attr("data-tail",function(t){return O(t).tail});N.append("path").attr("class","line"),N.append("path").attr("class","head").attr("d",s(m)),N.append("path").attr("class","tail").attr("d",s(m));var L=a(t,D,x,n?n.id:void 0,i),_=function(t,e){return"translate("+t+","+e+")"},B=l?function(t){var e=t,n=e/2,r=t,i=d3.extent(x,function(t){return t.y}),a=d3.extent(x,function(t){return t.x}),o=d3.scale.linear().domain(i).range([0,n-40]),s=d3.scale.linear().domain(a).range([0,2*Math.PI*.9]);return{height:r,diagonal:d3.svg.diagonal.radial().projection(function(t){return[o(t.y),s(t.x)]}),canvasTransform:"translate("+n+","+n+")",nodeTransform:function(t){var e=s(t.x),n=o(t.y),r=-n*Math.cos(e);return"translate("+n*Math.sin(e)+","+r+")"},headTransform:null,tailTransform:null}}(o):function(t){var e=function(t){return!t.children||0==t.children.length},n=function(t){return e(t)?f:h},r=function(t){return t.y+n(t).left},a=function(t){return t.y+n(t).right},o=function(t){return t.x+n(t).top},s=function(t){return t.x+n(t).bottom},l=d3.min(x,r),u=d3.max(x,a),c=[l,u],d=d3.min(x,o),p=d3.max(x,s),v=d3.extent(x,function(t){return t.x}),g=v[1]-v[0],m=d3.scale.linear().domain(c).range([0,t]),y=d3.scale.linear().domain(v).range([0,g]),b=function(t){return m(i&&e(t)?r(t):t.y)},w=function(t){return y(t.x)},k=function(t){return _(b(t),w(t))},A=d3.svg.diagonal().projection(function(t){return[b(t),w(t)]}),M=Math.max(10,(150-(p-d))/2),E=p-v[1]+M,P=v[0]-d+M,D=g+E+P,T=P;return{height:D,diagonal:A,nodeTransform:k,headTransform:function(t){return k(t.target)+" "+_(i&&e(t.target)?0:-C,0)+" rotate(180)"},tailTransform:function(t){return k(t.source)+" "+_(C,0)},canvasTransform:_(0,T)}}(o);w.setHeight(r,B.height),u.attr("width",o).attr("height",B.height),D.attr("transform",B.canvasTransform),L.attr("transform",B.nodeTransform),T.select(".line").attr("d",B.diagonal),T.select(".head").attr("transform",B.headTransform),T.select(".tail").attr("transform",B.tailTransform)}var r=t.container;d3.select(r).selectAll(".shake").style("display","none");var i=e.size>=10,l=!1,u=o(r).attr("data-dense",i);return{draw:n}},N=function(t,e){function n(t,e){e.role=t.description||"?";var n=e.type;if(n){var r=m[n];r||(r=m[n]=[]),r.push(e)}}function r(t){return"SameAddress"==t.type?"3, 3":null}function l(){var t=w.size(c.getBoundingClientRect()),n=t[0],r=t[1];if(k.attr("width",n).attr("height",r),!u)for(var i=0,a=e.nodes;i<a.length;i++){var o=a[i];o.root&&(o.x=n/2,o.y=r/2)}D=!1,T()}var u=!0;if(e.children)return O(t,e);var c=t.container;if(!e.nodes||e.nodes.length<2)throw new Error("graph empty or single node");for(var d,f={},h=e.nodes.length,p=0,v=e.nodes;p<v.length;p++){var g=v[p];g.root&&(d=g),f[g.id]=g}for(var m={},y=0,b=e.links;y<b.length;y++){var x=b[y];x.source=f[x.source],x.target=f[x.target],x.source&&x.target||console.error("broken link: ",x),x.source==d&&n(x,x.target),x.target==d&&n(x,x.source)}var k=(m.p,m.c,o(c)),A=k.append("g").attr("class","nodes").selectAll(".link").data(e.links),M=A.enter().append("g").attr("class","link").attr("data-source-id",function(t){return t.source.id}).attr("data-target-id",function(t){return t.target.id}).attr("data-head",function(t){return t.head}).attr("data-tail",function(t){return t.tail}).attr("data-old",function(t){return t.old}).attr("data-length",function(t){return t.length}).attr("data-helper",function(t){return t.helper});M.append("line").attr("class","line").attr("stroke-width",1).attr("stroke-dasharray",function(t){return r(t)}),M.append("rect").attr("class","desc-bg"),M.append("text").attr("class","desc").attr("text-anchor","middle").text(function(t){return t.text}),M.append("path").attr("class","head").attr("d",s(12)),M.append("path").attr("class","tail").attr("d",s(12));var E=a(t,k,e.nodes,d.id,!1),P=0,D=!0,T=function(){function t(t,e){return(e[1]-e[0])/(t[1]-t[0])}function n(t){return(t[1]+t[0])/2}if(!D&&P++%3==0){var r=c.getBoundingClientRect(),a=r.width,o=r.height,s=d3.extent(e.nodes,function(t){return t.x}),l=d3.extent(e.nodes,function(t){return t.y}),u=[100,a-100],d=[40,(2==h?120:o)-60],f=n(s),p=n(u),v=n(l),g=n(d),m=t(s,u),y=t(l,d),b=2==h?2:1.1*e.diameter;m=Math.min(m,y*b),2==h&&(y=0,m*=2,w.setHeight(c,120));var x=function(t){return(t-f)*m+p},k=function(t){return(t-v)*y+g},M=function(t){return x(t.source.x)},T=function(t){return x(t.target.x)},S=function(t){return k(t.source.y)},O=function(t){return k(t.target.y)},N=function(t){return T(t)-M(t)},L=function(t){return O(t)-S(t)},_=function(t){return(T(t)-M(t))/2},B=function(t){return(O(t)-S(t))/2},F=function(t){return 180/Math.PI*Math.atan2(L(t),N(t))},j=function(t){var e=180/Math.PI*Math.atan2(L(t),N(t));return e>90&&e<270?e-=180:e<-90&&e>-270&&(e+=180),e};A.attr("transform",function(t){return"translate("+M(t)+" "+S(t)+")"}),A.select("line").attr("x1",0).attr("y1",0).attr("x2",N).attr("y2",L);var I=function(t){return"rotate("+j(t)+" "+_(t)+" "+B(t)+" ) translate(0 -7)"};A.select(".desc").attr("x",_).attr("y",B).attr("transform",I),A.select(".desc-bg").attr("x",_).attr("y",B).attr("transform",I);var V=function(t){return N(t)+0},z=function(t){return L(t)+0};A.select(".tail").attr("transform",function(t){return"rotate("+F(t)+") translate("+C+" 0)"}),A.select(".head").attr("transform",function(t){return"translate("+V(t)+" "+z(t)+") rotate("+(180+F(t))+") translate("+C+" 0)"}),i(A,".desc",".desc-bg",3,3,1e3),E.attr("data-dx",function(t){return x(t.x)}).attr("transform",function(t){return"translate("+x(t.x)+","+k(t.y)+")"})}};return{draw:l}},L={tickFormat:x().timeFormat.multi([["%H:%M",function(t){return t.getMinutes()}],["%H:%M",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%e. %b ",function(t){return 1!=t.getDate()}],["%b",function(t){return t.getMonth()}],["%Y",function(){return!0}]])},_=function(t,e){var n=t.container,r=L.tickFormat,i={chartLeft:12,right:15,top:0,bottom:0},a=e.lines;if(!a||!a.length)throw new Error("vita empty");var o=a.length,s=i.top+23*o+5,l=new Date(e.startDate).getTime(),u=new Date(e.endDate).getTime(),c=function(t){return t?new Date(t):null},d=d3.select(t.container).append("svg"),f=y(t),h=function(t){return t.toLocaleDateString()};return{draw:function(){d.select("g").remove();var a=d.append("g"),o=n.getBoundingClientRect().width;d.attr("width",o);var p=d3.time.scale().domain([l,u]).range([i.chartLeft,o-i.right]),v=d3.svg.axis().scale(p).orient("bottom").tickFormat(r.format).innerTickSize(8).outerTickSize(10);a.append("g").attr("class","axis").attr("transform","translate(0,"+s+")").call(v),a.append("g").attr("class","axis grid").attr("transform","translate(0,"+s+")").call(v.tickFormat("").tickSize(-s,0));for(var g=i.chartLeft,m=o-i.right,y=0,b=0,x=e.lines;b<x.length;b++){var w=x[b],k=i.top+23*y+5,A=k+18,M=k+13.5-1,E=(k+A)/2;a.append("line").attr("x1",g).attr("x2",m).attr("y1",E).attr("y2",E).attr("class","grid");for(var P=w.bars.length,D=0,T=!1,C=0,S=0,O=0,N=w.bars;O<N.length;O++){var L=N[O];!function(e){var n=c(e.start),r=c(e.end)||new Date,o=n?p(n):i.chartLeft+12.78,s=p(r),l=s-o,u=o+l/2,d=null;!e.start&&e.end?d="bis "+h(r):e.start&&!e.end?d="ab "+h(n):e.start&&e.end&&(d=h(n)+" – "+h(r));var v=(d?d+" ":"")+e.role.name+" "+w.description,y=e.role.abbr;l>250&&(y=e.role.abbr+" "+w.text,T=!0),0==D&&(C=o-g),D==P-1&&(S=m-s);var b=a.append("svg:a").attr("xlink:href",f(e)).attr("xlink:title",v).attr("data-old",!!e.end||null).attr("data-clickable",function(n){return!!t.getClickHandler(e)||null}).on("click",function(n){var r=d3.event;t.invokeClickHandler(e)&&r.preventDefault()});if(b.append("title").text(v),b.append("rect").attr("x",o).attr("y",k).attr("width",l).attr("height",18).attr("class","c"+e.role.cat),!e.start){var x=Math.max(i.chartLeft,o-12.78),A=o,E=k,O=k+18,N=[A+","+E,A+","+O,x+","+(E+O)/2];b.append("polygon").attr("points",N.join(" ")).attr("class","in c"+e.role.cat)}if(!e.end){var x=o+l,A=Math.min(12.78+x,m),E=k,O=k+18,N=[x+","+E,x+","+O,A+","+(E+O)/2];b.append("polygon").attr("points",N.join(" ")).attr("class","out c"+e.role.cat)}b.append("text").attr("x",u).attr("y",M).attr("class","label-text c"+e.role.cat).text(y),++D}(L)}T||(C>S?C>200&&a.append("text").attr("x",g+C).attr("y",M).attr("class","left extra").text(w.text):S>200&&a.append("text").attr("x",m-S).attr("y",M).attr("class","right extra").text(w.text)),++y}var _=new Date,B="Heute, "+h(_),F=p(_),j=a.append("svg:a").attr("xlink:title",B);j.append("title").text(B),j.append("line").attr("class","today").attr("x1",F).attr("y1",0).attr("x2",F).attr("y2",s+15),d.attr("height",s+30)}}},B=function(t,e){function n(t){return t.old?v:p[t.cat%h]}function r(){var r=i.getBoundingClientRect().width;if(w.width(r),w.data(e.event).resizeToFit(),!k){var a=t.handlerValue("publicationClick"),o="function"==typeof a;d3.select(i).selectAll(".label-g").attr("data-clickable",function(e){return!(!o&&!t.getClickHandler(e.data))||null}).on("click",function(e){var n=d3.event;t.invokeClickHandler(e.data)?n.preventDefault():a&&(a(e.data.query),n.preventDefault())}).on("mouseenter",function(t){var e=d3.event,r=d3.select(e.target).select("rect").node(),a=n(t.data);r&&(r.style.fill=a.bright);var o=t.data.id;d3.select(i).selectAll(".link-layer path").filter(function(t){return t.data.id==o}).attr("data-highlighted",!0);var s=t.data.publicationId;d3.selectAll("[data-publication-id='"+s+"']").style("background-color",a.light)}).on("mouseleave",function(t){var e=d3.event,r=n(t.data),a=d3.select(e.target).select("rect").node();a&&(a.style.fill=r.standard),d3.select(i).selectAll(".link-layer path").attr("data-highlighted",!1);var o=t.data.publicationId;d3.selectAll("[data-publication-id='"+o+"']").style("background-color","")}),k=!0}}for(var i=t.container,a=(t.numberValue("maxItems"),y(t)),o=0,s=e.event;o<s.length;o++){var c=s[o];c.href=a(c),c.height=18}var d=new Date(e.minDate),f=new Date(e.maxDate);if(!d3KitTimeline)throw new Error("d3kit-timeline not found in global context which is ");var h=10,p=u(m(t),h),v=l(d3.hsl("#888888")),g=function(t){return n(t).standard},b=i.getBoundingClientRect().width,x={left:12,right:15,top:5,bottom:30},w=new d3KitTimeline(i,{margin:x,direction:"up",initialWidth:b,initialHeight:100,labella:{maxPos:b-(x.left+x.right)},domain:[d,f],dotRadius:5,linkColor:g,dotColor:g,labelBgColor:g,layerGap:20,timeFn:function(t){return new Date(t.time)},textFn:function(t){return t.text}}),k=!1;return w.axis.tickFormat(L.tickFormat),w.axis.innerTickSize(8),w.axis.outerTickSize(10),{draw:r}},F=function(t,e){function r(t){var e=d3.select(t);return t.matches("tr")?e:w.closest(e,"tr")}function i(t){var e=0==t.size()?"?":t.attr("data-row");return w.closest(t,"table").selectAll("[data-parent-row='"+e+"']")}function a(t){var e=r(t);e.classed(p,!1).classed(h,!0),i(e).classed("hidden",!1)}function o(t){var e=r(t);e.classed(p,!0).classed(h,!1),i(e).classed("hidden",!0).each(function(){o(this)})}function s(t){r(t).classed(h)?o(t):a(t)}if(!e.item||0==e.item.length)throw new Error("no data");for(var l=0,u=e.item;l<u.length;l++){var c=u[l];if("break"===function(e){if(!e){var r=t.stringValue("subject")||"assets";throw new Error("no data for subject '"+r+"'")}var i=e.column,a=e.row,o=f(t),l=t.numberValue("maxYears")||5;o&&i.reverse();var u=function(t){return o?t<l:t>=i.length-l};if(i.length<=0)return"break";var c=i[0].currency,h=1,p=c,v=Z;if(c){for(var g=0,m=0,y=0,b=0,x=a;b<x.length;b++)for(var w=x[b],k=0,M=w.cell;k<M.length;k++){var E=M[k];if(n(E.value)){var P=Math.abs(E.value);P>1e5&&(++y,P>1e7&&(++m,P>1e10&&++g))}}var D=g>=5,T=m>=5;y<5&&(v=Y),T&&(h=1e3,p="Tsd. "+c,D&&(h=1e6,p="Mio. "+c))}var C=document.createElement("table"),S=d3.select(C).attr("class","ui bizq very compact celled small unstackable table"),O=S.append("thead").append("tr"),N=O.append("th").attr("class","first");N.text(p),N.append("a").attr("href",e.info.csvUrl).attr("download","download").attr("title","CSV/Excel Download").append("i").attr("class","download icon"),i.forEach(function(t,e){if(u(e)){O.append("th").text(t.date?tt(t.date):"").attr("data-col",i.length-e).attr("data-source-title",t.info.publication.title).attr("data-source-date",t.info.publication.data)}});for(var L=function(t,e){return t&&t.semantics&&t.semantics.indexOf(e)>=0},_=function(t){return L(t,"SUMMARY")},B=function(t){return L(t,"CUSTOM")},F=S.append("tbody"),j=0,I=0,V=a;I<V.length;I++){var w=V[I];w.id=j,++j}a.forEach(function(t,e){if(!L(t,"HELPER")){var n=0,r=t.level&&t.level.value,a=r<1?"expanded":"closed";r>=2&&(a+=" hidden");var l=d3.select(document.createElement("tr")).attr("class",a+" active-on-hover").attr("data-row",e).attr("data-level",r).attr("data-parent-row",t.parentId).attr("data-child-count",t.hasChildren).attr("data-summary",_(t)).attr("data-custom",B(t)).on("click",function(){var t=d3.event;s(t&&t.target),t.preventDefault()});l.append("td").attr("class","first").text(t.text||t.name);o&&t.cell.reverse(),t.cell.forEach(function(t,e){if(u(e)){var r=void 0===t.value?"":v(t.value/h);r&&n++;l.append("td").attr("data-col",i.length-e).text(r)}}),n>0&&F.node().appendChild(l.node())}});var z=S.append("tfoot").append("tr");z.append("th").attr("class","first").text("Quelle"),i.forEach(function(e,n){if(u(n)){d(z.append("th").attr("data-col",i.length-n),e.info.publication.title,e.info.source,t.handlerValue("popup")||A.showPopup)}}),C.setAttribute("data-item",e.info.item),t.showItem(e.info.title,C)}(c))break}var h="expanded",p="closed";return P},j=function(t,e){var n=e.financials,r=f(t);if(!(n&&n.length>0&&n[0].items.length>0))throw new Error("no data available");for(var i=d3.select(t.container).append("table").attr("class","ui bizq very compact celled small unstackable striped table"),a=i.append("thead").append("tr"),o=i.append("tbody"),s=i.append("tfoot").append("tr"),l=0,u=n;l<u.length;l++){var c=u[l];c.itemsById={};for(var h=0,p=c.items;h<p.length;h++){var v=p[h];c.itemsById[v.id]=v}}var g=n[n.length-1];r&&n.reverse(),a.append("th").text("");for(var m=0,y=n;m<y.length;m++){var b=y[m];a.append("th").text(b.formattedDate)}for(var x=0,w=g.items;x<w.length;x++){var k=w[x],M=o.append("tr").attr("class","active-on-hover");M.append("td").text(k.name);for(var E=0,P=n;E<P.length;E++){var D=P[E],T=D.itemsById[k.id],C=M.append("td");if(T){var S=T.value>=0?"pos":"neg";C.append("span").attr("class",S+" value").text(T.formattedValue),T.note&&C.append("span").attr("class","note").text(T.note)}else C.append("span").text("N/A")}}if(g.source.auditorName){var M=o.append("tr").attr("class","active-on-hover");M.append("td").text("Prüfer");for(var O=0,N=n;O<N.length;O++){var L=N[O],_=L.source.auditorName,C=M.append("td");C.append("span").attr("class","auditor value").text(_||"N/A")}}if(g.source.publicationDate){var M=o.append("tr").attr("class","active-on-hover");M.append("td").text("Veröffentlichungs­datum");for(var B=0,F=n;B<F.length;B++){var j=F[B],I=j.source.publicationDate,C=M.append("td");C.append("span").attr("class","date value").text(I?tt(new Date(I)):"N/A")}}s.append("th").text("Quelle");for(var V=0,z=n;V<z.length;V++){var R=z[V];d(s.append("th"),R.source.publicationTitle,R.source.snippets,t.handlerValue("popup")||A.showPopup)}return{draw:function(){}}},I=function(t,e){var n=d3.select(t.container).selectAll(".publication").data(e.publications).enter().append("div").attr("class","pub").attr("data-publication-id",function(t){return t.id}),r=n.append("h2");r.append("span").attr("class","icon").text(function(t){return t.internal.icon}),r.append("span").attr("class","date").text(function(t){return t.internal.formattedDate}),r.append("a").attr("href","#").html(function(t){return t.internal.htmlTitle}).on("click",function(){var t=d3.event;t.target.parentElement.parentElement.classList.toggle("expanded"),t.preventDefault()}),n.append("div").attr("class","text").html(function(t){return t.html});var i=t.handlerValue("companyClick");i&&n.selectAll(".company").attr("data-clickable",!0);var a=t.handlerValue("personClick");a&&n.selectAll(".person").attr("data-clickable",!0);var o=t.handlerValue("addressClick");o&&n.selectAll("address").attr("data-clickable",!0);var s=t.handlerValue("registerClick");s&&n.selectAll(".register").attr("data-clickable",!0);var l=t.handlerValue("filingClick");return l&&n.selectAll(".filing").attr("data-clickable",!0),n.on("click",function(){var t,e=d3.event,n=e.target,r=g(n);i&&n.classList.contains("company")&&(i(r),t=!0),a&&n.classList.contains("person")&&(a(r),t=!0),o&&"ADDRESS"==n.tagName&&(o({query:n.textContent}),t=!0),s&&n.classList.contains("register")&&(s({query:n.textContent}),t=!0),l&&n.classList.contains("filing")&&(l({query:n.textContent}),t=!0),t&&e.preventDefault()}),P},V=function(t,e){if(e){var n=t.handlerValue("load");n&&n(e)}return P},z=function(t,e){if(e){var n=t.handlerValue("load");n&&n(e)}return P},R=function(t,n){function r(t){var n={},r=t.subject,i=r.name[0].name,a=r.address&&r.address[0],o=a&&a.city,s={query:n,address:a,name:i,details:t.formattedDetails},l=r.tag;switch(l&&l.terminated&&(s.terminated=!0),t.targetType){case"Company":s.type="c",n.address=o,n.name=i;var u=r.register&&r.register[0];u&&u.id&&(u.city&&(n.registerCity=u.city),n.registerId=u.id);break;case"Person":s.type="p";var c=i.split(",");n.lastName=c[0],n.firstName=e(c[1]),n.birthDate=r.birthDate,n.address=o,n.address&&n.birthDate||(n.id=t.targetId)}return s}function i(){for(var e=0,i=s.items;e<i.length;e++){var a=i[e],l=r(a),u=l.query,c=u.address,d=u.name;d||(d=u.lastName+", "+u.firstName),c&&(d+=", "+c);var f=o.append("li").attr("class","search-result"),h=(f.append("span").attr("class","icon").text("Company"==a.targetType?"":""),f.append("div").attr("class","body")),p=h.append("a").attr("href",document.location.pathname+"?"+M.toQueryString(u)).text(d).on("click",function(){var e=d3.event;t.invokeClickHandler(n)&&e.preventDefault()});l.terminated&&p.append("sup").attr("title","erloschen").text("✝"),h.append("div").attr("class","detail").text(l.detail);for(var v=0,g=a.formattedDetails;v<g.length;v++){var m=g[v];h.append("div").attr("class","detail").text(m)}}}var a=d3.select(t.container),o=a.append("ul").attr("class","search-results"),s=n.cursor,l=(n.properties&&n.properties.search,t.handlerValue("noResults")),u=t.handlerValue("oneResult");if(0==s.items.length?l?l():a.append("p").text("Keine Resultate zu dieser Suche."):1==s.items.length&&u?(console.info("one result",s.items[0]),u(r(s.items[0]))):i(),!s.lastPage)var c=a.append("a").attr("href","#").attr("class","more").on("click",function(){var e=d3.event,n=(e.target,p(t.options,{offset:s.offset+s.limit}));q.requestData(n,function(t){s=t.cursor,i(),0==s.items.length&&c.style("display","none")},t.fail.bind(t)),e.preventDefault()}).text("Weitere Resultate anzeigen");return P};t.suggest=h;var H={barChart:T,drillDown:D,graph:N,dendrogram:O,history:B,vita:_,pubTable:I,sheet:F,financials:j,contact:V,overview:z,searchResults:R},q=function(){function t(t,e,r){var o={options:t,success:e,error:r};t.immediate?n([o]):(a.push(o),window.setTimeout(i))}function e(t,e,n){var i=(window.dataDomain||r())+"/data.json",a="?"+M.toQueryString(e);a.length<10?d3.json(i+a,n).header("X-Api-Key",t):d3.json(i).header("X-Api-Key",t).post(JSON.stringify(e),n)}function n(t){for(var n,r=[],i={},a=0,o=t;a<o.length;a++){var s=o[a];r.push(s.options),n=n||s.options.apiKey}r.length>0&&(i.options=r,i.origin=document.location.hostname,i.v=document.body.getAttribute("data-version"),e(n,i,function(e,n){if(e)for(var r=e.statusText+" (HTTP "+e.status+")",i=0,a=t;i<a.length;i++){var o=a[i];o.error(r)}else{var s=n.result;t.forEach(function(t,e){var n=s[e],r=n.error;r?t.error(r.message):t.success(s[e])})}}))}function i(){n(a),a=[]}var a=[];return{requestData:t}}(),W=function(){function t(t,e){if(this.items=[],this.container="string"==typeof t?document.getElementById(t):t,!this.container)throw new Error("container node undefined or null");if(this.options=v(e,this.container),this.widgetType=this.stringValue("type")||this.stringValue("layout"),!this.widgetType)throw new Error("no widget type specified");this.options.type=this.widgetType,"graph"!=this.widgetType&&"contact"!=this.widgetType||(this.options.immediate=!0);var n=this.load.bind(this);this.data=this.objectValue("data"),this.data?window.setTimeout(n):q.requestData(this.options,n,this.fail.bind(this))}return t.prototype.getType=function(){return this.widgetType},t.prototype.fail=function(t){var e=this.handlerValue("error");e?e(t):console.error(t)},t.prototype.load=function(t){this.data=this.data||t;try{var e=H[this.widgetType];if(!e)throw new Error("invalid widget type: "+this.widgetType);this.chart=e(this,this.data),this.container.setAttribute("data-layout",this.widgetType),this.draw()}catch(t){return void this.fail(t)}var n=this.handlerValue("success");n&&n()},t.prototype.showItem=function(t,e){var n=this,r=function(t,e){if(!!n.stringValue("subject"))return e;var r=document.createElement("div"),i=document.createElement("h2");return i.textContent=t,r.appendChild(i),r.appendChild(e),r},i=this.handlerValue("handleItem")||r,a=i(t,e);a&&(this.container.appendChild(a),this.items.push(a))},t.prototype.adjustSize=function(t){var e=t.getBoundingClientRect(),n=this.numberValue("width")||e.width,r=this.numberValue("height")||e.height,i=this.numberValue("ratio"),a=this.numberValue("minHeight"),o=this.numberValue("maxHeight"),s=r;i&&(s=n*i),a&&(s=Math.max(s,a)),o&&(s=Math.min(s,o)),r!=s&&(console.info("changing "+this.widgetType+" height ",r," to "+s),w.setHeight(t,s))},t.prototype.draw=function(){this.adjustSize(this.container),this.chart&&(this.chart.draw(),d3.select(this.container).selectAll("*").each(function(){var t=this.getAttribute("transform");t||(t=getComputedStyle(this).getPropertyValue("transform"))&&"none"!=t&&this.setAttribute("transform",t)}))},t.prototype.invokeClickHandler=function(t){var e=this.getClickHandler(t);return!!e&&(e(t.query),!0)},t.prototype.getClickHandler=function(t){if(t.type)switch(t.type.toString().toLowerCase()[0]){case"c":return this.handlerValue("companyClick");case"p":return this.handlerValue("personClick");case"h":return this.handlerValue("publicationClick")}},t.prototype.numberValue=function(t){var e=this.options[t];return"function"==typeof e?e():"number"==typeof e?e:"string"==typeof e?Number(e):void 0},t.prototype.stringValue=function(t){var e=this.options[t];return"function"==typeof e?e():"string"==typeof e?e:void 0},t.prototype.nodeValue=function(t){var e=this.options[t];return"object"==typeof e?e:"function"==typeof e?e():"string"==typeof e?d3.select(this.container).select(e).node():void 0},t.prototype.objectValue=function(t){var e=this.options[t];return"function"==typeof e?e():"object"==typeof e?e:"string"==typeof e?JSON.parse(e):void 0},t.prototype.handlerValue=function(t){var e=this.options[t];if("function"==typeof e)return e.bind(this)},t}();t.Widget=W;var G=function(t){return null},U=function(t){return Math.round(100*t)/100},X=x().numberFormat(",.2f"),Y=function(t){return X(U(t))},K=x().numberFormat(",.0f"),Z=function(t){return K(Math.round(t))},J=x(),Q=J.timeFormat("%d.%m.%Y"),tt=function(t){return t?("string"==typeof t&&(t=new Date(t)),Q(t)):""};!function(e){function n(){for(var t={},e=0,n=["text","address","maxDistanceKm","legalForm","status"];e<n.length;e++){var r=n[e],a=o[r];if(a){var s=a.value;!s||"legalForm"!=r&&"status"!=r||(s=s.replace(/,/g,"|")),t[r]=s}}var l=o.querySelectorAll("[name=financialId]"),u=l&&l.length;if(u){for(var c=[],d=0;d<u;++d)c.push({});for(var f={},h=0,p=["financialId","lowerBound","upperBound"];h<p.length;h++){var r=p[h];f[r]=[];for(var v=o.querySelectorAll("[name='"+r+"']"),d=0;d<u;++d){var a=v[d],g=c[d];g[r]=a&&a.value}}for(var m=[],d=0;d<u;++d){var g=c[d];console.info(g);var y=g.financialId;y&&"-"!=y&&(i(g.lowerBound)||i(g.upperBound))&&m.push(g)}for(var b=0,x=["financialId","lowerBound","upperBound"];b<x.length;b++){for(var r=x[b],w=[],d=0;d<m.length;++d){var g=m[d];w.push(g[r])}t[r]=w.map(encodeURIComponent).join("|")}}var k=o.querySelectorAll("[name=eventType]"),A=k&&k.length;if(A){for(var M=[],d=0;d<A;++d)M.push({});for(var f={},E=0,P=["eventType","minDate","maxDate"];E<P.length;E++){var r=P[E];f[r]=[];for(var v=o.querySelectorAll("[name='"+r+"']"),d=0;d<A;++d){var a=v[d],D=M[d];D[r]=a&&a.value}}for(var T=[],d=0;d<A;++d){var D=M[d];console.info(D);var C=D.eventType;C&&"-"!=C&&(i(D.minDate)||i(D.maxDate))&&T.push(D)}for(var S=0,O=["eventType","minDate","maxDate"];S<O.length;S++){for(var r=O[S],w=[],d=0;d<T.length;++d){var D=T[d];w.push(D[r])}t[r]=w.map(encodeURIComponent).join("|")}}return t.search="power",t}function r(t){var e=t.text,n=o.text;n&&e&&(n.value=e);var r=t.address,i=o.address;i&&r&&(i.value=r);var a=o.maxDistanceKm,u=t.maxDistanceKm;a&&void 0!==u&&(a.value=u);for(var c=0,d=["legalForm","status"];c<d.length;c++){var f=d[c],h=o[f],p=t[f];if(h&&p){var v=p.split("|");$(h.parentElement).dropdown("set selected",v)}}var g=t.financialId;if(g){for(var m=g.split("|"),y=m.length,b=0;b<y;++b)s.addFinancialFilter();for(var x=0,w=["financialId","lowerBound","upperBound"];x<w.length;x++){var f=w[x],k=t[f],A=o.querySelectorAll("[name='"+f+"']");if(k&&A)for(var v=k.split("|"),b=0;b<y;++b){var h=A[b];h.value=v[b]}}}var M=t.eventType;if(M){for(var E=M.split("|"),y=E.length,b=0;b<y;++b)l.addEventFilter();for(var P=0,D=["eventType","minDate","maxDate"];P<D.length;P++){var f=D[P],k=t[f],A=o.querySelectorAll("[name='"+f+"']");if(k&&A)for(var v=k.split("|"),b=0;b<y;++b){var h=A[b];h.value=v[b]}}}}function i(t){return void 0!==t&&null!==t&&""!=t}var a,o=document.querySelector("form.power-search");!function(t){function e(){var t=this.parentElement;t.parentElement.removeChild(t)}function n(t,e){var n=document.getElementById(t).children[0];e.appendChild(n.cloneNode(!0))}t.removeParentLine=e,t.cloneLine=n}(a||(a={}));var s;!function(e){function n(){a.cloneLine("financial-filter-prototype",r)}var r=document.getElementById("financial-filters");e.addFinancialFilter=n,d3.select("#add-financial-filter").on("click",n),t.Dom.onEvent("click",r,".remove-financial-filter",a.removeParentLine)}(s=e.FinancialFiltersDom||(e.FinancialFiltersDom={}));var l;!function(e){function n(){a.cloneLine("event-filter-prototype",r)}var r=document.getElementById("event-filters");e.addEventFilter=n,d3.select("#add-event-filter").on("click",n),t.Dom.onEvent("click",r,".remove-event-filter",a.removeParentLine)}(l=e.EventFiltersDom||(e.EventFiltersDom={})),e.readPowerSearchInput=n,e.writePowerSearchInput=r}(t.PowerSearch||(t.PowerSearch={}))}(r=e.Bizq||(e.Bizq={})),e.NorthData=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(1);var r=n(14);window.Bizq=r.Bizq,window.NorthData=r.Bizq},,,,,,,,,,,,,function(t,e,n){n(15),t.exports=n(29)},function(t,e){}]);
//# sourceMappingURL=viz.min.js.map